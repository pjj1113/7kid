(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37039ce6"],{"18fd":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"statistics"},[i("nav-bar",{attrs:{border:!1,title:t.$t("wristband.districtParticipationStatistics")}}),i("div",{staticStyle:{position:"fixed","z-index":"100",top:"46px",width:"100%"}},[i("date-step",{attrs:{date:t.date},on:{"update:date":function(e){t.date=e}}})],1),i("div",{staticClass:"content"},[t.statistics.commonAreaInfo?i("stat-card",{directives:[{name:"permission",rawName:"v-permission",value:["attendance-teacher-common-area-statistic"],expression:"['attendance-teacher-common-area-statistic']"}],attrs:{stat:t.statistics.commonAreaInfo,summary:!0,today:t.today==t.dateString},on:{titleClick:t.showDialog},nativeOn:{click:function(e){return t.$router.push("area?areaType=2&date="+t.date)}}}):t._e(),t.statistics.outSideAreaInfo?i("stat-card",{directives:[{name:"permission",rawName:"v-permission",value:["attendance-teacher-outside-area-statistic"],expression:"['attendance-teacher-outside-area-statistic']"}],attrs:{stat:t.statistics.outSideAreaInfo,summary:!0,today:t.today==t.dateString},on:{titleClick:t.showDialog},nativeOn:{click:function(e){return t.$router.push("area?areaType=3&date="+t.date)}}}):t._e(),t.statistics.classAreaInfo?i("stat-card",{directives:[{name:"permission",rawName:"v-permission",value:["attendance-teacher-class-area-statistic"],expression:"['attendance-teacher-class-area-statistic']"}],attrs:{stat:t.statistics.classAreaInfo,summary:!0,today:t.today==t.dateString},on:{titleClick:t.showDialog},nativeOn:{click:function(e){return t.$router.push("garden?areaType=1&date="+t.date)}}}):t._e(),i("van-empty",{directives:[{name:"show",rawName:"v-show",value:!t.statistics.commonAreaInfo&&!t.statistics.outSideAreaInfo&&!t.statistics.classAreaInfo,expression:"!statistics.commonAreaInfo  && !statistics.outSideAreaInfo &&  !statistics.classAreaInfo"}],attrs:{description:t.$t("common.noData")}},[i("template",{slot:"image"},[i("img",{staticStyle:{height:"auto"},attrs:{src:a("52c4")}})])],2)],1)],1)},n=[],s=a("2939"),c=a("da1d"),o=a("84ac"),r=a("8847"),d=a("a4fb"),l=a("ad2b"),u={name:"wristband-statistics",components:{NavBar:c["a"],DateStep:o["a"],statCard:r["a"]},data:function(){return{appData:s["a"].getAppData(),date:this.$route.query.date||(new Date).valueOf(),today:Object(l["a"])((new Date).valueOf(),"{y}-{m}-{d}"),statistics:{commonAreaInfo:{title:this.$t("wristband.commonAreaParticipationStatistics"),subTitle:">",areaType:2},outSideAreaInfo:{title:this.$t("wristband.outSideAreaParticipationStatistics"),subTitle:">",areaType:3},classAreaInfo:{title:this.$t("wristband.classAreaParticipationStatistics"),subTitle:">",areaType:1}}}},computed:{dateString:function(){return Object(l["a"])(this.date,"{y}-{m}-{d}")}},watch:{date:function(t){this.getStatistics()},"$attrs.isRefreshing":function(t){t&&(this.getStatistics(),this.$emit("appRefresh",!1))}},mounted:function(){this.getStatistics()},methods:{getStatistics:function(){var t=this;d["a"].getPositionParticipationStatistics({date:this.dateString}).then((function(e){t.statistics=e.data,t.statistics.commonAreaInfo&&(t.statistics.commonAreaInfo.title=t.$t("wristband.commonAreaParticipationStatistics")),t.statistics.commonAreaInfo&&(t.statistics.commonAreaInfo.subTitle=">"),t.statistics.commonAreaInfo&&(t.statistics.commonAreaInfo.areaType=2),t.statistics.outSideAreaInfo&&(t.statistics.outSideAreaInfo.title=t.$t("wristband.outSideAreaParticipationStatistics")),t.statistics.outSideAreaInfo&&(t.statistics.outSideAreaInfo.subTitle=">"),t.statistics.outSideAreaInfo&&(t.statistics.outSideAreaInfo.areaType=3),t.statistics.classAreaInfo&&(t.statistics.classAreaInfo.title=t.$t("wristband.classAreaParticipationStatistics")),t.statistics.classAreaInfo&&(t.statistics.classAreaInfo.subTitle=">"),t.statistics.classAreaInfo&&(t.statistics.classAreaInfo.areaType=1),t.statistics.classAreaInfo&&(t.statistics.classAreaInfo.joinDescr=t.$t("wristband.cumulativeNumberOfParticipants"))}))},showDialog:function(t){var e,a;3==t.areaType?(e=this.$t("wristband.outSideAreaParticipationStatistics"),a=this.$t("wristband.outSideAreaParticipationDescr")):2==t.areaType?(e=this.$t("wristband.commonAreaParticipationStatistics"),a=this.$t("wristband.commonAreaParticipationDescr")):(e=this.$t("wristband.classAreaParticipationStatistics"),a=this.$t("wristband.classAreaParticipationDescr")),this.$dialog.alert({title:e,message:a,width:"285",className:"area-dialog",confirmButtonColor:"#48D4C6",getContainer:".statistics"})}}},p=u,f=(a("531e"),a("c701")),b=Object(f["a"])(p,i,n,!1,null,"76eedcc0",null);e["default"]=b.exports},3188:function(t,e,a){},"428f":function(t,e,a){},"4e7b":function(t,e,a){},"52c4":function(t,e,a){t.exports=a.p+"img/empty_page_icon.e43b2826.png"},"531e":function(t,e,a){"use strict";a("428f")},"84ac":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"date-step"},[a("span",{staticClass:"icon-block left-icon",on:{click:t.onLeftTimeClick}},[a("van-icon",{attrs:{name:"arrow-left"}})],1),a("span",{staticClass:"date"},[t._v(t._s(t.vDateString))]),a("span",{staticClass:"icon-block right-icon",on:{click:t.onRightTimeClick}},[a("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.rightDateShow,expression:"rightDateShow"}],attrs:{name:"arrow"}})],1)])},n=[],s=(a("d0bf"),a("ad2b")),c={props:{date:{required:!0,type:[String,Number],default:(new Date).valueOf()}},data:function(){return{}},computed:{vDate:{get:function(){return new Date(Number(this.date)||"").valueOf()},set:function(t){this.$emit("update:date",t),this.$emit("step",{timeStamp:t,tiemString:this.vDateString})}},vDateString:function(){return Object(s["a"])(this.vDate,"{y}-{m}-{d}")},rightDateShow:function(){return new Date(this.vDateString).valueOf()+864e5<(new Date).valueOf()}},methods:{onLeftTimeClick:function(){this.vDate=this.dateStep(this.vDate,-1)},onRightTimeClick:function(){this.vDate=this.dateStep(this.vDate,1)},dateStep:function(t,e){return parseInt(t)+864e5*e}}},o=c,r=(a("9f96"),a("c701")),d=Object(r["a"])(o,i,n,!1,null,"7a2ea40a",null);e["a"]=d.exports},8847:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("van-row",{staticClass:"card-header"},[a("van-col",{attrs:{span:"16"}},[a("div",{staticClass:"card-title",on:{click:function(e){return e.stopPropagation(),t.$emit("titleClick",{areaType:t.stat.areaType})}}},[a("span",[t._v(t._s(t.stat.title||t.$t("wristband.realTimeStatistics")))])])]),a("van-col",{attrs:{span:"8"}},[a("div",{staticClass:"card-subtitle"},[t._v(t._s(t.stat.subTitle))])])],1),a("div",{staticClass:"card-body"},[a("div",{staticClass:"num"},[t._v(t._s(t.stat.allJoinUserNum))]),a("div",{staticClass:"num-descr"},[t._v(t._s(t.stat.joinDescr||(t.today&&1!=t.stat.areaType?t.$t("wristband.currentNumberOfParticipants"):t.$t("wristband.cumulativeNumberOfParticipants"))))])]),t.areaList&&t.areaList.length?[a("van-divider"),a("van-row",{staticClass:"card-foot"},t._l(t.areaList,(function(e,i){return a("van-col",{attrs:{span:"8"},on:{click:function(a){return t.showArea(e)}}},[a("div",{staticClass:"num"},[t._v(t._s(e.joinUserNum)),t.summary?t._e():a("van-icon",{attrs:{name:"arrow",size:"10"}})],1),a("div",{staticClass:"num-descr"},[t._v(t._s(e.areaName))])])})),1)]:t._e()],2)},n=[],s=a("d211"),c={props:{stat:{type:Object},summary:{type:Boolean,default:!1},today:{type:Boolean,default:!0}},data:function(){return{}},computed:{areaList:function(){return this.today&&1!=this.stat.areaType?this.stat.areaInfoVOList:this.stat.areaItemVOList}},mounted:function(){},methods:{showArea:function(t){this.summmay||this.$emit("showArea",Object(s["a"])(Object(s["a"])({},t),{},{areaType:this.stat.areaType}))}}},o=c,r=(a("9bfc"),a("c701")),d=Object(r["a"])(o,i,n,!1,null,"088050f8",null);e["a"]=d.exports},"9bfc":function(t,e,a){"use strict";a("4e7b")},"9f96":function(t,e,a){"use strict";a("3188")},a4fb:function(t,e,a){"use strict";a("445a");var i,n=a("28f8"),s=a("d722");e["a"]=(i={schoolSpaceList:function(t){return Object(s["b"])("/attendance/v1/schoolSpace/list",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},selectById:function(t){return Object(s["b"])("/attendance/v1/schoolArea/selectById",t)},schoolAreaList:function(t){return Object(s["b"])("/attendance/v1/schoolArea/list",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolAreaDelete:function(t){return Object(s["b"])("/attendance/v1/schoolArea/delete",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolSpaceById:function(t){return Object(s["b"])("/attendance/v1/schoolSpace/selectById",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolPositionSelectById:function(t){return Object(s["b"])("/attendance/v1/schoolPosition/selectById",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolPositionInsert:function(t){return Object(s["b"])("/attendance/v1/schoolPosition/insert",t,{headers:{"Content-Type":"application/json"}})},getGardenClassList:function(t){return Object(s["b"])("/kid-arch/v1/teacher/clazz/teacher/grade-clazz-option",t)},clazzStatistical:function(t){var e="/attendance/v1/bandBind/clazzStatistical";return Object(s["b"])(e,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},classStatisticalDetail:function(t){return Object(s["b"])("/attendance/v1/bandBind/clazzStatisticalDetail",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},bingdingSearch:function(t){return Object(s["b"])("/attendance/v1/bandBind/condition",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},bingdingWristband:function(t){return Object(s["b"])("/attendance/v1/bandBind/addStudent",t,{headers:{"Content-Type":"application/json"}})},unbindingWristband:function(t){return Object(s["b"])("/attendance/v1/bandBind/delete",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolSpaceDelete:function(t){return Object(s["b"])("/attendance/v1/schoolSpace/delete",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolPositionDelete:function(t){return Object(s["b"])("/attendance/v1/schoolPosition/delete",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolSpaceUpdate:function(t){return Object(s["b"])("/attendance/v1/schoolSpace/update",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolPositionUpdate:function(t){return Object(s["b"])("/attendance/v1/schoolPosition/update",t,{headers:{"Content-Type":"application/json"}})},schoolSpaceSave:function(t){return Object(s["b"])("/attendance/v1/schoolSpace/insert",t,{headers:{"Content-Type":"application/json"}})},schoolPositionDeviceList:function(t){return Object(s["b"])("/attendance/v1/schoolPosition/deviceList",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolAreaInsert:function(t){return Object(s["b"])("/attendance/v1/schoolArea/insert",t,{headers:{"Content-Type":" application/json"}})},schoolAreaUpdate:function(t){return Object(s["b"])("/attendance/v1/schoolArea/update",t,{headers:{"Content-Type":"application/json"}})},availablePosition:function(t){return Object(s["b"])("/attendance/v1/schoolPosition/availablePosition",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getPositionParticipationStatistics:function(t){return Object(s["b"])("/attendance/v1/areaStatistic/dayArea",t)},getCornerManagerList:function(t){return Object(s["b"])("/attendance/v1/schoolPosition/deviceList",t)},updateBeacon:function(t){return Object(s["b"])("/attendance/v1/schoolPosition/updateDeviceName",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},bindBeacon:function(t){return Object(s["b"])("/attendance/v1/schoolPosition/bindDevice",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},unBindBeacon:function(t){return Object(s["b"])("/attendance/v1/schoolPosition/unbindDevice",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}},Object(n["a"])(i,"getPositionParticipationStatistics",(function(t){return Object(s["b"])("/attendance/v1/areaStatistic/dayArea",t)})),Object(n["a"])(i,"getAreaParticipationStatistics",(function(t){return Object(s["b"])("/attendance/v1/areaStatistic/dayAreaType",t)})),Object(n["a"])(i,"getClazzParticipationStatistics",(function(t){return Object(s["b"])("/attendance/v1/areaStatistic/dayAreaTypeDetail",t)})),Object(n["a"])(i,"getGradenParticipationStatistics",(function(t){return Object(s["b"])("/attendance/v1/areaStatistic/dayClazz",t)})),Object(n["a"])(i,"dayUserAreaTotal",(function(t){return Object(s["b"])("/attendance/v1/areaStatistic/dayUserArea",t)})),Object(n["a"])(i,"dayUserAreaDetail",(function(t){return Object(s["b"])("/attendance/v1/areaStatistic/dayUserDetail?date=".concat(t.date,"&userId=").concat(t.userId),"",{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(n["a"])(i,"getSleepDayTotalStatic",(function(t){return Object(s["b"])("/attendance/v1/sleepStatic/dayTotalStatic",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(n["a"])(i,"getSleepCurrentTimeStatic",(function(t){return Object(s["b"])("/attendance/v1/sleepStatic/currentTimeStatic",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(n["a"])(i,"getAllClazzSleepInfoStatic",(function(t){return Object(s["b"])("/attendance/v1/sleepStatic/getClazzInfoStatic",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(n["a"])(i,"getUserSleepInfoByClazzId",(function(t){return Object(s["b"])("/attendance/v1/sleepStatic/getUserInfoByClazzId",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(n["a"])(i,"getTimePeriodSleepStatic",(function(t){return Object(s["b"])("/attendance/v1/sleepStatic/currentTimeStaticList",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(n["a"])(i,"getClazzCurrentTimeSleepStaticList",(function(t){return Object(s["b"])("/attendance/v1/sleepStatic/clazzCurrentTimeStaticList",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(n["a"])(i,"getClazzHistoryStaticList",(function(t){return Object(s["b"])("/attendance/v1/sleepStatic/clazzHistoryStaticList",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(n["a"])(i,"getClazzChildSleepStaticList",(function(t){return Object(s["b"])("/attendance/v1/sleepStatic/clazzChildSleepStatic",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(n["a"])(i,"getStudentSleepDayStatistics",(function(t){return Object(s["b"])("/attendance/v1/sleepStatic/userBaseInfoStatic",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(n["a"])(i,"checkDayIsHoliday",(function(t){return Object(s["b"])("/kid-arch/v1/teacher/holiday/getTypeByDay",t,{headers:{"Content-Type":"application/json"}})})),i)},a7d6:function(t,e,a){"use strict";a("f257")},da1d:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-nav-bar",{attrs:{title:t.t_title,fixed:"",border:t.border}},[t._t("left",[a("van-icon",{staticClass:"nav-go",attrs:{name:"arrow-left"},on:{click:t.onClickLeft}})],{slot:"left"}),t._t("title",null,{slot:"title"}),t._t("right",null,{slot:"right"})],2)},n=[],s=a("2939"),c={computed:{t_title:function(){return this.title?this.title:/.*[\u4e00-\u9fa5]+.*$/.test(this.$route.meta.title)?this.$route.meta.title:this.$t("route.".concat(this.$route.meta.title))}},props:{border:{type:Boolean,default:!0},onlyBack:{type:Boolean,default:!1},title:{type:String}},methods:{onClickLeft:function(){this.onlyBack||s["a"].closeWebview(),this.$router.go(-1)}}},o=c,r=(a("a7d6"),a("c701")),d=Object(r["a"])(o,i,n,!1,null,"2f4d49ad",null);e["a"]=d.exports},f257:function(t,e,a){}}]);