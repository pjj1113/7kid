(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20b98f27"],{5058:function(t,e,i){t.exports=i.p+"img/application_icon_refuse_b_nomal.13a4f075.png"},"609e":function(t,e,i){},"6ca3":function(t,e,i){},7836:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-person"},[i("div",{staticClass:"visit-reason"},[t.imgUrl?i("img",{staticClass:"status",attrs:{src:t.imgUrl}}):t._e(),i("h3",[t._v("访问事由")]),i("div",{staticClass:"form-dom"},[i("van-cell-group",{attrs:{border:!1}},[i("van-cell",{attrs:{title:"访问事由",label:t.visitorReason}}),i("van-cell",{attrs:{title:"开始时间",value:t.beginTime}}),i("van-cell",{attrs:{title:"结束时间",value:t.endTime}}),i("van-cell",{attrs:{title:"接待人",value:t.receptionName}}),i("van-cell",{attrs:{title:"接待老师手机号",value:t.receptionPhone}})],1)],1)]),t._l(t.visitorVOList,(function(e,n){return i("div",{key:n,staticClass:"visit-reason visit-info"},[i("h3",[t._v("访问信息"+t._s(n+1))]),i("van-cell-group",{attrs:{border:!1}},[i("van-cell",{attrs:{title:"姓名",value:e.visitorName}}),i("van-cell",{attrs:{title:"手机号",value:e.visitorPhone}}),i("van-cell",{attrs:{title:"证件类型",value:e.cardType}}),i("van-cell",{attrs:{title:"证件号码",value:e.cardNo}})],1)],1)})),0==t.status||3==t.status?i("div",{directives:[{name:"permission",rawName:"v-permission",value:["school-visitor-manage-application-record-audit"],expression:"['school-visitor-manage-application-record-audit']"}],staticClass:"btn-sub"},[3==t.status?i("van-button",{staticStyle:{color:"#666666",borderColor:"#D5D5D5"},attrs:{round:"",plain:"",size:"large",type:"info"},on:{click:t.applicationRefuse}},[t._v("拒绝")]):t._e(),0==t.status?i("van-row",{attrs:{justify:"center"}},[i("van-col",{attrs:{span:"11"}},[i("van-button",{staticStyle:{color:"#666666",borderColor:"#D5D5D5"},attrs:{round:"",plain:"",hairline:"",block:"",type:"info"},on:{click:t.applicationRefuse}},[t._v("拒绝")])],1),i("van-col",{attrs:{span:"2"}}),i("van-col",{attrs:{span:"11"}},[i("van-button",{attrs:{round:"",size:"large",color:"linear-gradient(to right, #79DABD, #4CD7EC)",type:"button"},on:{click:t.applicationAgree}},[t._v("同意")])],1)],1):t._e()],1):t._e()],2)},a=[],o=(i("cb3c"),i("6540"),i("3f27"),i("8048")),r=(i("6a61"),i("2e91")),c=(i("ad2b"),i("2939")),s=i("8abc"),l={data:function(){return{visitorReason:"",receptionName:"",receptionPhone:"",phone:"",beginTime:"",endTime:"",visitorVOList:[],visitorName:"",status:1,imgUrl:"",cardTypeList:null,userInfo:null,id:""}},mounted:function(){c["a"].getAppData(),this.userInfo=localStorage.getItem("jsBridgeInfo")&&JSON.parse(localStorage.getItem("jsBridgeInfo"))||"",this.applicationDetails(),this.id=this.$route.query.id?this.$route.query.id:this.userInfo.id},methods:{applicationDetails:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].cardType().then((function(e){t.cardTypeList=e.data}));case 2:return e.next=4,s["a"].applicationDetails({id:t.id}).then((function(e){switch(t.visitorReason=e.data.visitorReason,t.visitorName=e.data.visitorName,t.receptionName=e.data.receptionName,t.receptionPhone=e.data.receptionPhone,t.beginTime=e.data.beginTime,t.endTime=e.data.endTime,t.visitorVOList=e.data.visitorVOList,t.visitorVOList=t.visitorVOList.map((function(e){var i=t.cardTypeList.filter((function(t){return e.cardType==t.cardType}));return e.cardType=i[0].cardTypeName,e})),t.status=e.data.status,t.status){case 0:t.imgUrl="";break;case 1:t.imgUrl=i("8699");break;case 2:t.imgUrl=i("5058");break;case 3:t.imgUrl="";break}}));case 4:case"end":return e.stop()}}),e)})))()},applicationRefuse:function(){var t=this;o["a"].confirm({title:"确认拒绝申请？",message:"拒绝申请后，访客将无法进入幼儿园！"}).then((function(){s["a"].applicationRefuse({id:t.id}).then((function(e){t.applicationDetails(),c["a"].visitorsRefreshStatus()}))})).catch((function(){}))},applicationAgree:function(){var t=this;o["a"].confirm({title:"确认同意申请？",message:"同意申请后，访客将被授权进入幼儿园！"}).then((function(){s["a"].applicationAgree({id:t.id}).then((function(e){t.applicationDetails(),c["a"].visitorsRefreshStatus()}))})).catch((function(){}))}}},u=l,p=(i("c563"),i("c701")),v=Object(p["a"])(u,n,a,!1,null,null,null);e["a"]=v.exports},"786b":function(t,e,i){"use strict";i("609e")},8699:function(t,e,i){t.exports=i.p+"img/application_icon_agree_a_nomal.627d87de.png"},"8abc":function(t,e,i){"use strict";var n,a=i("28f8"),o=i("d722");e["a"]=(n={uploadFile:function(t){return Object(o["b"])("/file/v1/file/upload/binary",t,{headers:{"Content-Type":"multipart/form-data"}})},addVisitant:function(t,e){return Object(o["b"])("/visitor/v1/applicationRecord/applicationAdd",t,{headers:{"Content-Type":"application/json"}},e)},addVisitantTeacher:function(t,e){return Object(o["b"])("/visitor/v1/applicationRecord/TeacherAdd",t,{headers:{"Content-Type":"application/json"}},e)},applicationDetails:function(t){return Object(o["b"])("/visitor/v1/applicationRecord/getById",t)},applicationAgree:function(t){return Object(o["b"])("/visitor/v1/applicationRecord/agree",t)},applicationRefuse:function(t){return Object(o["b"])("/visitor/v1/applicationRecord/refuse",t)},sendSmsCode:function(t){return Object(o["b"])("/message/v1/sms/send-sms-code",t)},verifySmsCodSe:function(t){return Object(o["b"])("/message/v1/sms/verify-sms-code",t)},getSchoolInfo:function(t){return Object(o["b"])("/visitor/v1/applicationRecord/getSchoolInfo",t)},getVisitorTeacherInfo:function(t){return Object(o["b"])("/visitor/v1/applicationRecord/getTeacherInfo",t)},teacherLogin:function(t){return Object(o["b"])("/iam/v1/web-oauth/kid-login/teacher-login",t)},getVisitantDetail:function(t){return Object(o["b"])("/visitor/v1/visitor/record/get-by-id",t)}},Object(a["a"])(n,"applicationRefuse",(function(t){return Object(o["b"])("/visitor/v1/applicationRecord/refuse",t)})),Object(a["a"])(n,"applicationAgree",(function(t){return Object(o["b"])("/visitor/v1/applicationRecord/agree",t)})),Object(a["a"])(n,"delayDate",(function(t){return Object(o["b"])("/visitor/v1/visitor/record/delay-time",t)})),Object(a["a"])(n,"addAccessRecord",(function(t){return Object(o["b"])("/visitor/v1/visitor/record/add-access-record",t)})),Object(a["a"])(n,"visitantGoSchool",(function(t){return Object(o["b"])("/visitor/v1/visitor/record/entry-school",t)})),Object(a["a"])(n,"visitantOutSchool",(function(t){return Object(o["b"])("/visitor/v1/visitor/record/out-school",t)})),Object(a["a"])(n,"qrCodeInfo",(function(t){return Object(o["b"])("/visitor/v1/visitor/record/get-qr-code-info",t)})),Object(a["a"])(n,"verifyQrCode",(function(t){return Object(o["b"])("/visitor/v1/visitor/record/verify-qr-code-info",t)})),Object(a["a"])(n,"cardType",(function(t){return Object(o["b"])("/visitor/v1/option/cardType",t)})),Object(a["a"])(n,"wechatShare",(function(t){return Object(o["b"])("/visitor/v1/visitor/record/get-wechat-share-info",t)})),Object(a["a"])(n,"smsInvite",(function(t){return Object(o["b"])("/visitor/v1/visitor/record/sms-invite",t)})),Object(a["a"])(n,"applicationList",(function(t){return Object(o["b"])("/visitor/v1/applicationRecord/applicationList",t)})),Object(a["a"])(n,"getVisitantList",(function(t){return Object(o["b"])("/visitor/v1/visitor/record/query-list",t,{headers:{"Content-Type":"application/json"}})})),Object(a["a"])(n,"getCheckList",(function(t){return Object(o["b"])("/visitor/v1/applicationRecord/applicationList",t)})),Object(a["a"])(n,"getNoCheckNum",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[30];return Object(o["b"])("/visitor/v1/teacher/msg/unread",t,{headers:{"Content-Type":"application/json"}})})),Object(a["a"])(n,"getYesCheckList",(function(t){return Object(o["b"])("/visitor/v1/applicationRecord/yesApprovalList",t)})),Object(a["a"])(n,"getNoCheckList",(function(t){return Object(o["b"])("/visitor/v1/applicationRecord/noApprovalList",t)})),Object(a["a"])(n,"getCodeConfing",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["b"])("/visitor/v1/application/backgroundConfig",t)})),n)},a7d6:function(t,e,i){"use strict";i("f257")},c563:function(t,e,i){"use strict";i("6ca3")},d6ae:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"apply",style:t.safeBottomMargin},[t.userInfo?i("nav-bar",{style:t.barHeight,scopedSlots:t._u([{key:"left",fn:function(){return[i("van-icon",{attrs:{name:"arrow-left"},on:{click:t.onClickLeft}})]},proxy:!0}],null,!1,4146808153)}):t._e(),i("div",{staticClass:"main",style:t.mainTop},[i("showVisitantInfo")],1)],1)},a=[],o=i("da1d"),r=i("7836"),c=i("2939"),s={data:function(){return{statusBarHeight:"",barHeight:"",mainTop:"",safeBottomMargin:"",userInfo:""}},components:{showVisitantInfo:r["a"],navBar:o["a"]},mounted:function(){c["a"].getAppData(),this.userInfo=localStorage.getItem("jsBridgeInfo")&&JSON.parse(localStorage.getItem("jsBridgeInfo"))||""},methods:{onClickLeft:function(){this.userInfo.refreshToken?this.$router.go(-1):c["a"].closeWebview()}}},l=s,u=(i("786b"),i("c701")),p=Object(u["a"])(l,n,a,!1,null,"436e5f1c",null);e["default"]=p.exports},da1d:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-nav-bar",{attrs:{title:t.t_title,fixed:"",border:t.border}},[t._t("left",[i("van-icon",{staticClass:"nav-go",attrs:{name:"arrow-left"},on:{click:t.onClickLeft}})],{slot:"left"}),t._t("title",null,{slot:"title"}),t._t("right",null,{slot:"right"})],2)},a=[],o=i("2939"),r={computed:{t_title:function(){return this.title?this.title:/.*[\u4e00-\u9fa5]+.*$/.test(this.$route.meta.title)?this.$route.meta.title:this.$t("route.".concat(this.$route.meta.title))}},props:{border:{type:Boolean,default:!0},onlyBack:{type:Boolean,default:!1},title:{type:String}},methods:{onClickLeft:function(){this.onlyBack||o["a"].closeWebview(),this.$router.go(-1)}}},c=r,s=(i("a7d6"),i("c701")),l=Object(s["a"])(c,n,a,!1,null,"2f4d49ad",null);e["a"]=l.exports},f257:function(t,e,i){}}]);