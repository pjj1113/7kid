(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd1262d4"],{"2de8":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("nav-bar",{attrs:{onlyBack:!0,title:t.$t("wristband.createCorner")},scopedSlots:t._u([{key:"right",fn:function(){return[i("strong",{on:{click:t.sure}},[i("span",{class:{unrightBtn:t.unclick}},[t._v(" "+t._s(t.$t("wristband.sure"))+" ")])])]},proxy:!0}])}),i("van-field",{staticStyle:{"margin-top":"47px"},attrs:{label:t.$t("wristband.cornerType"),"is-link":"",readonly:"","input-align":"right",placeholder:t.$t("wristband.pselect"),value:t.typeValue.name},on:{click:function(e){t.showType=!0}}}),i("van-action-sheet",{attrs:{actions:t.typeactions,"cancel-text":t.$t("wristband.cancel"),"close-on-click-action":""},on:{select:t.onTypeSelect,cancel:t.onCancel},model:{value:t.showType,callback:function(e){t.showType=e},expression:"showType"}}),i("van-field",{attrs:{label:t.$t("wristband.cornerName"),maxlength:"6",placeholder:t.$t("wristband.pinputCornerName"),"input-align":"right"},model:{value:t.cornerName,callback:function(e){t.cornerName=e},expression:"cornerName"}}),i("van-field",{attrs:{"is-link":"",readonly:"","input-align":"right",placeholder:t.$t("wristband.pselect"),value:t.topicValue.name,label:t.$t("wristband.SubjectAreas")},on:{click:function(e){t.showTopic=!0}}}),i("van-action-sheet",{attrs:{actions:t.topicactions,"cancel-text":t.$t("wristband.cancle"),"close-on-click-action":""},on:{select:t.onTopicSelect,cancel:t.onCancel},model:{value:t.showTopic,callback:function(e){t.showTopic=e},expression:"showTopic"}}),1==t.typeValue.type?i("van-field",{attrs:{label:t.$t("wristband.BelongClass"),"is-link":"",readonly:"",value:t.clazz.clazzName,"input-align":"right",placeholder:t.$t("wristband.pselect")},on:{click:function(e){t.showSelectClass=!0}}}):t._e(),i("selectClass",{attrs:{showSelectClass:t.showSelectClass},on:{selectClassFinish:t.selectClassFinish,cancle:function(e){t.showSelectClass=!1}}}),i("div",{staticStyle:{background:"white"}},[i("van-field",{staticStyle:{"margin-top":"10px"},attrs:{"is-link":"",readonly:"","input-align":"right",label:t.$t("wristband.BelongLoc"),border:!1,placeholder:t.$t("wristband.pselect")},on:{click:function(e){t.showSelectAddress=!0}}}),i("div",{staticClass:"positionStyle"},t._l(t.schoolPositionList,(function(e,s){return i("div",{key:s,staticClass:"item"},[i("div",[t._v(t._s(e.name))]),i("van-icon",{staticStyle:{width:"7px",height:"7px",margin:"3px 8px"},attrs:{name:"cross"},on:{click:function(e){return t.deletePos(s)}}})],1)})),0)],1),i("selectAddress",{attrs:{selectAddressData:t.schoolPositionList,showSelectAddress:t.showSelectAddress},on:{cancleSelectPop:function(e){t.showSelectAddress=!1},selectAddFinish:t.selectAddFinish}}),i("div",{staticStyle:{background:"white",padding:"15px"}},[i("div",{staticStyle:{color:"#333333","font-size":"14px",display:"flex"}},[t._v(" "+t._s(t.$t("wristband.AreaProfile"))+" "),i("div",{staticStyle:{color:"#BBBBBB"}},[t._v(t._s(t.$t("wristband.optional")))])]),i("van-field",{staticStyle:{"margin-left":"-15px"},attrs:{label:"",autosize:"",type:"textarea",maxlength:"120",placeholder:t.$t("wristband.fillTargetCorner"),rows:2},model:{value:t.introduce,callback:function(e){t.introduce=e},expression:"introduce"}})],1),i("div",{staticStyle:{"margin-top":"10px",padding:"15px",background:"white"}},[i("div",{staticStyle:{color:"#333333","font-size":"14px",display:"flex"}},[t._v(" "+t._s(t.$t("wristband.cornerPhoto"))+" "),i("div",{staticStyle:{color:"#BBBBBB"}},[t._v(t._s(t.$t("wristband.optional")))])]),i("div",{staticClass:"file-upload"},[i("uploader",{attrs:{fileList:t.fileList,maxCount:1,mediaSheetActions:t.mediaSheetActions},on:{mediaSelect:t.onMediaSelect,reUpload:t.onReUpload}})],1)])],1)},a=[],n=(i("72b3"),i("c726"),i("6540"),i("989e"),i("0bd5"),i("b784"),i("9b42"),i("270f"),i("7336"),i("b08c")),c=i("da1d"),o=i("f86f"),l=i("c425"),r=i("2939"),h=i("a4fb"),p=i("d9db"),d={mounted:function(){var t=this;window.receiveMediaDataFromNative=function(e){var i=e.parameters.data;i.forEach((function(e){var i=1==e.type,s="";s=i?e.upDataAliResponse.snapshotUrl:e.upDataAliResponse.url,console.log(s);var a=t.getExistFile(e);null!=a?(a.progress=e.progress,a.url=s,a.status=e.status,a.resourceData=e.upDataAliResponse):t.fileList.push({url:s,isVideo:i,progress:e.percent,id:e.id,path:e.path,status:e.status,resourceData:e.upDataAliResponse})}))};var e=r["a"].getAppData().permission;null!=e&&(e.includes("attendance-teacher-common-area")&&this.typeactions.push({name:this.$t("wristband.publishArea"),type:2}),e.includes("attendance-teacher-outside-area")&&this.typeactions.push({name:this.$t("wristband.outArea"),type:3}),e.includes("attendance-teacher-class-area")&&this.typeactions.push({name:this.$t("wristband.classCorner"),type:1})),h["a"].schoolSpaceList({type:1,availableFlag:!0}).then((function(e){(null==e.data.list||e.data.list.length<=0)&&h["a"].schoolSpaceList({type:2,availableFlag:!0}).then((function(e){(null==e.data.list||e.data.list.length<=0)&&t.$dialog.confirm({title:"",message:t.$t("wristband.Kindergarten_hasnot_location"),width:"270px",confirmButtonText:t.$t("wristband.toCreate"),confirmButtonColor:"#48D4C6",cancelButtonText:t.$t("wristband.cancle"),cancelButtonColor:"#999999"}).then((function(){t.$router.replace({path:"/wristband/spaceManager/createSpace"})}))}))})),window.kidBackPress=function(){return!!t.showSelectAddress&&(t.showSelectAddress=!1,!0)}},watch:{typeValue:function(t){-1!=t.type&&""!=this.cornerName&&-1!=this.topicValue.type&&this.schoolPositionList.length>0?1==t.type&&-1==this.clazz.clazzId?this.unclick=!0:this.unclick=!1:this.unclick=!0},cornerName:function(t){-1!=this.typeValue.type&&""!=t&&-1!=this.topicValue.type&&this.schoolPositionList.length>0?1==this.typeValue.type&&-1==this.clazz.clazzId?this.unclick=!0:this.unclick=!1:this.unclick=!0},topicValue:function(t){-1!=this.typeValue.type&&""!=this.cornerName&&-1!=t.type&&this.schoolPositionList.length>0?1==this.typeValue.type&&-1==this.clazz.clazzId?this.unclick=!0:this.unclick=!1:this.unclick=!0},clazz:function(t){-1!=this.typeValue.type&&""!=this.cornerName&&-1!=this.topicValue.type&&this.schoolPositionList.length>0?1==this.typeValue.type&&-1==t.clazzId?this.unclick=!0:this.unclick=!1:this.unclick=!0},schoolPositionList:function(t){-1!=this.typeValue.type&&""!=this.cornerName&&-1!=this.topicValue.type&&t.length>0?1==this.typeValue.type&&-1==this.clazz.clazzId?this.unclick=!0:this.unclick=!1:this.unclick=!0}},components:{selectAddress:o["a"],selectClass:l["a"],uploader:p["a"],navBar:c["a"]},data:function(){return{showType:!1,showTopic:!1,unclick:!0,showSelectClass:!1,showSelectAddress:!1,typeValue:{name:"",type:-1},topicValue:{name:"",type:-1},clazz:{clazzName:"",clazzId:-1},introduce:"",cornerName:"",fileList:[],selectClass:{id:-1},schoolPositionList:[],typeactions:[],mediaSheetActions:[{name:this.$t("wristband.takePhoto")},{name:this.$t("wristband.fromAlbum")}],topicactions:[{name:this.$t("wristband.health"),type:1},{name:this.$t("wristband.language"),type:2},{name:this.$t("wristband.social"),type:3},{name:this.$t("wristband.science"),type:4},{name:this.$t("wristband.article"),type:5}]}},methods:{onTypeSelect:function(t){this.showType=!1,this.typeValue=t},onTopicSelect:function(t){this.topicValue=t,this.showTopic=!1},selectClassFinish:function(t){this.clazz=t[0].subList[0],this.showSelectClass=!1},onCancel:function(){this.showType=!1,this.showTopic=!1},selectAddFinish:function(t){this.showSelectAddress=!1,this.schoolPositionList=t},onReUpload:function(t){var e={method:"reUploadMediaFromNative",parameters:{id:t.id,path:t.path},callback:"receiveMediaDataFromeNative"};r["a"].callNative(e)},onMediaSelect:function(t){var e={method:"selectMediaDataFromNative",parameters:{},callback:"receiveMediaDataFromNative"},i=1-this.fileList.length;0==t?e.method="takePhoto":1==t&&(e.parameters={imageMaxCount:i},e.method="selectAlbum"),r["a"].callNative(e)},getExistFile:function(t){var e=null;return this.fileList.forEach((function(i){i.id==t.id&&(e=i)})),e},sure:function(){var t=this;if(-1!=this.typeValue.type&&""!=this.cornerName&&-1!=this.topicValue.type&&(1!=this.typeValue.type||-1!=this.clazz.clazzId)&&0!=this.schoolPositionList.length){var e="";this.fileList.length>0&&(e=this.fileList[0].resourceData.id);var i=[];this.schoolPositionList.map((function(t){i.push(t.id)})),1==this.typeValue.type?h["a"].schoolAreaInsert({name:this.cornerName,type:this.typeValue.type,topic:this.topicValue.type,description:this.introduce,clazzId:this.clazz.clazzId,positionIdList:i,resourceId:e}).then((function(e){Object(n["a"])(t.$t("wristband.Operationsuccessful")),t.$router.go(-1)})):h["a"].schoolAreaInsert({name:this.cornerName,type:this.typeValue.type,topic:this.topicValue.type,description:this.introduce,positionIdList:i,resourceId:e}).then((function(e){Object(n["a"])(t.$t("wristband.Operationsuccessful")),t.$router.go(-1)}))}},deletePos:function(t){this.schoolPositionList.splice(t,1)}}},u=d,y=(i("903b"),i("c701")),f=Object(y["a"])(u,s,a,!1,null,"5774c38b",null);e["default"]=f.exports},"60fd":function(t,e,i){},"903b":function(t,e,i){"use strict";i("60fd")}}]);