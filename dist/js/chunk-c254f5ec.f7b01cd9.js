(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c254f5ec"],{"3a69":function(e,t,i){"use strict";i("e739")},cd05:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"infant"},[i("nav-bar"),i("div",{staticClass:"info-list"},[i("van-cell-group",[i("van-field",{attrs:{label:"入园日期","label-width":"165","input-align":"right",readonly:"","right-icon":e.isDisabled?"":"arrow",placeholder:e.isDisabled?"未填写":"请填写",value:e._f("timeFormat")(Object.keys(e.student).length>0?e.student.baseInfo.entryDate:"")},on:{click:e.showDatePicker}}),i("van-field",{attrs:{label:"证件类型","label-width":"165","input-align":"right",readonly:"","right-icon":e.isDisabled?"":"arrow",placeholder:e.isDisabled?"未填写":"请填写",value:e.student.baseInfo.cardName},on:{click:function(t){return e.editInfo(5,{value:""})}}}),i("van-field",{attrs:{label:"证件号码","label-width":"165","input-align":"right",readonly:"","right-icon":e.isDisabled?"":"arrow",placeholder:e.isDisabled?"未填写":"请填写",value:e.student.baseInfo.cardNo},on:{click:function(t){return e.editInfo(5,{value:""})}}}),e._l(e.info1,(function(t){return i("van-field",{key:t.label,attrs:{label:t.label,"label-width":"165","input-align":"right",readonly:"","right-icon":e.isDisabled?"":"arrow",placeholder:e.isDisabled?"未填写":"请填写",value:Object.keys(e.student).length>0?e.student.baseInfo[t.name]:""},on:{click:function(i){return e.editInfo(t,{value:e.student.baseInfo[t.name]})}}})})),i("van-field",{attrs:{label:"民族",value:e.student.baseInfo["nationName"],"label-width":"165","input-align":"right",readonly:"","right-icon":e.isDisabled?"":"arrow",placeholder:e.isDisabled?"未填写":"请填写"},on:{click:function(t){return e.showPickerList("nationList")}}}),i("van-field",{attrs:{label:"血型",value:e.student.baseInfo["bloodTypeName"],"label-width":"165","input-align":"right",readonly:"","right-icon":e.isDisabled?"":"arrow",placeholder:e.isDisabled?"未填写":"请填写"},on:{click:function(t){return e.showPickerList("bloodTypeList")}}})],2),i("van-cell-group",e._l(e.info2,(function(t){return i("van-field",{key:t.label,attrs:{label:t.label,"label-width":"165","input-align":"right",readonly:"","right-icon":e.isDisabled?"":"arrow",placeholder:e.isDisabled?"未填写":"请填写",value:e.fieldStatus(t.name)},on:{click:function(i){return e.editInfo(t,{value:e.student.extraInfo[t.name],images:e.student.extraInfo[t.name+"Urls"]})}}})})),1)],1),i("div",{staticClass:"attach"},[e._v("仅供幼儿园应用内管理幼儿个人信息使用")]),i("info-editor",{attrs:{visible:e.visible,info:e.info,updateInfo:e.updateInfo},on:{"update:visible":function(t){e.visible=t}}}),i("van-popup",{attrs:{position:"bottom"},model:{value:e.datePickerShow,callback:function(t){e.datePickerShow=t},expression:"datePickerShow"}},[i("datetime-picker",{attrs:{value:e.entryDate},on:{handleClose:function(t){e.datePickerShow=!1},change:e.changeDate},model:{value:e.entryDate,callback:function(t){e.entryDate=t},expression:"entryDate"}})],1),i("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[i("van-picker",{attrs:{"show-toolbar":"",columns:e.pickList},on:{cancel:function(t){e.showPicker=!1},confirm:e.pickerConfirm}})],1),i("re-card",{attrs:{isShow:e.isShow},on:{"update:isShow":function(t){e.isShow=t},"update:is-show":function(t){e.isShow=t}}})],1)},a=[],o=(i("72b3"),i("6540"),i("1d7a"),i("fae2"),i("0bd5"),i("9b42"),i("270f"),i("7336"),i("b08c")),s=(i("1b66"),i("821f")),l=i("da1d"),r=i("bb13"),c=i("774a"),d=i("2939"),f=i("d722"),u=i("7802"),h={components:{NavBar:l["a"],DatetimePicker:r["a"],InfoEditor:c["a"],"van-picker":s["a"],ReCard:u["a"]},name:"infant",data:function(){return{entryDate:new Date,visible:!1,datePickerShow:!1,student:{baseInfo:{},extraInfo:{}},userInfo:"",info:{},bloodTypeList:[],nationList:[],pickList:[],showPicker:!1,isDisabled:!1,isShow:!1,info1:[{name:"presentAddress",label:"现居住地址",title:"修改现居住地址",placeholder:"请输入现居住地址",maxlength:200,type:2,cate:"baseInfo"},{name:"censusAddress",label:"户籍地址",title:"修改户籍地址",placeholder:"请输入户籍地址",maxlength:200,type:2,cate:"baseInfo"},{name:"country",label:"国籍",title:"修改国籍",placeholder:"请输入国籍",maxlength:20,type:1,cate:"baseInfo"}],info2:[{name:"educationInfo",label:"亲子教育经历",title:"亲子教育经历",placeholder:"请输入亲子教育经历",type:4,cate:"extraInfo"},{name:"studyBehaviorInfo",label:"学习或行为问题",title:"学习或行为问题",placeholder:"幼儿是否有学习、情绪或行为上的困难，需要教师特别照顾？",type:4,cate:"extraInfo"},{name:"healthInfo",label:"健康或生理问题",title:"健康或生理问题",placeholder:"儿是否有健康或生理困难需要教师特别照顾？",type:4,cate:"extraInfo"},{name:"birthCertificateInfo",label:"幼儿出生证",title:"幼儿出生证",placeholder:"请上传出生证照片或填写出生证编号",type:4,cate:"extraInfo"},{name:"vaccinationInfo",label:"预防接种证",title:"预防接种证",placeholder:"上传预防接种证照片或填写预防接种证编号",type:4,cate:"extraInfo"},{name:"residenceCardInfo",label:"居住证",title:"居住证",placeholder:"",type:3,cate:"extraInfo"},{name:"houseCardInfo",label:"房产证",title:"房产证",placeholder:"",type:3,cate:"extraInfo"},{name:"censusCardInfo",label:"户口本",title:"户口本",placeholder:"",type:3,cate:"extraInfo"}]}},computed:{},mounted:function(){var e=this;this.userInfo=d["a"].getAppData(),this.isDisabled=0==this.userInfo.pagePermission,this.initStudentInfo(),this.getBloodTypeList(),this.getNationList(),window.backPrePage=function(){return e.backPrePage(),!0}},methods:{backPrePage:function(){return!0===this.visible?(this.visible=!1,!1):!0===this.datePickerShow?(this.datePickerShow=!1,!1):!0===this.showPicker?(this.showPicker=!1,!1):void d["a"].closeWebview()},editInfo:function(e,t){if(this.isDisabled)return!1;5===e?(this.info={title:"修改证件信息",type:5,cate:"baseInfo",value:{value:{cardType:this.student.baseInfo.cardType,cardNo:this.student.baseInfo.cardNo,cardName:this.student.baseInfo.cardName}}},this.visible=!0):(t.hasOwnProperty("value")&&null===t.value&&(t.value=""),e.value=t,t.hasOwnProperty("images")&&(null===t.images&&(t.images=[]),e.fileList=new Array,t.images.forEach((function(t,i){e.fileList.push({url:t.thumbnailUrl,resourceId:t.resourceId})}))),this.info=e,this.visible=!0)},initStudentInfo:function(){var e=this;"parent"===this.userInfo.appType?f["a"].parentGetStudentInfo({studentId:this.userInfo.studentId}).then((function(t){e.entryDate=e.$options.filters["timeFormat"](t.data.baseInfo.entryDate),e.student=t.data})):f["a"].teacherGetStudentInfo({studentId:this.userInfo.studentId}).then((function(t){e.entryDate=e.$options.filters["timeFormat"](t.data.baseInfo.entryDate),e.student=t.data}))},changeDate:function(){this.info={name:"entryDate",cate:"baseInfo",value:{value:this.entryDate}},this.updateInfo()},updateInfo:function(){var e=this,t={studentId:this.userInfo.studentId};if("extraInfo"===this.info.cate){if(t[this.info.cate]={},4===this.info.type&&(t[this.info.cate][this.info.name]=this.info.value.value),this.info.value.images){var i=this.info.value.images.map((function(e){return e.resourceId}));t[this.info.cate][this.info.name.replace("Info","")+"Ids"]=i}}else 5==this.info.type?(t[this.info.cate]={},t[this.info.cate]=this.info.value.value):(t[this.info.cate]={},t[this.info.cate][this.info.name]=this.info.value.value);"parent"===this.userInfo.appType?f["a"].parentUpdateStudentInfo(t).then((function(t){"common-0001"===t.code&&(e.initStudentInfo(),e.info={},e.visible=!1)})).catch((function(t){if("kidarch-1720"===t.code)return e.isShow=!0,!1;Object(o["a"])(t.message),reject(t)})):f["a"].teacherUpdateStudentInfo(t).then((function(t){"common-0001"===t.code&&(e.initStudentInfo(),e.info={},e.visible=!1)})).catch((function(t){if("kidarch-1720"===t.code)return e.isShow=!0,!1;Object(o["a"])(t.message),reject(t)}))},fieldStatus:function(e){if(Object.keys(this.student).length>0){var t=0;if(this.student.extraInfo.hasOwnProperty(e+"Urls")&&this.student.extraInfo[e+"Urls"]&&(t=this.student.extraInfo[e+"Urls"].length,t>0))return"已传"+t+"张图片";if(this.student.extraInfo[e])return"已填写"}},getBloodTypeList:function(){var e=this;f["a"].bloodTypeList().then((function(t){t.data.forEach((function(t,i){e.bloodTypeList.push({text:t.bloodTypeName,id:t.bloodType,field:"bloodType"})}))}))},getNationList:function(){var e=this;f["a"].nationList().then((function(t){t.data.forEach((function(t,i){e.nationList.push({text:t.nationName,id:t.nationType,field:"nationType"})}))}))},pickerConfirm:function(e){this.info={name:e.field,cate:"baseInfo",value:{value:e.id}},this.showPicker=!1,this.updateInfo()},showPickerList:function(e){this.isDisabled||(this.pickList=this[e],this.showPicker=!0)},showDatePicker:function(){this.isDisabled||(this.datePickerShow=!0)}}},p=h,b=(i("3a69"),i("c701")),I=Object(b["a"])(p,n,a,!1,null,"2b25d568",null);t["default"]=I.exports},e739:function(e,t,i){}}]);