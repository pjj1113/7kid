(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25c7e7da"],{"07d3":function(t,e,a){},"10bb":function(t,e,a){"use strict";a("07d3")},3911:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAqCAYAAAAu9HJYAAACeklEQVRYR+1YPYsTURQ9dyZIEshqsVb+ACFbJJmX4EoWRLC0UYiNyBZ+NdoKKljYCIKVVkFhUQQrtbDcToJrMi/MFBtQQjorFTa7kESZ5MqDLCQhmUxeNovoTDe8e+Yczptz584j+FxCiDgRPWbmKwCW/Go11naJ6BUz35FStvzwNEXkcwBXNQTMAnkhpbymK5KEEL8AkGEY6Uqlsj0L87TaXC630uv1HADcbDYT9XpdcY29JjpZKBTMRqPhAfghpTw+jVRnXQjxHcCyaZrL5XL5ZyhSx0WFCeykEOIjgDVdogXjdgzDWFPh+PtFDjohhGB1L6X0bU2Lcm8S/5CYUGQA+0MnA5gUqOT/czKTySQNw3gD4IGU8r2fTZZlXSKi+57nFVzX/TploBnbXbTSbVnWdSIqMnOxWq3enEK8AWCdiNZt23556CKVUNu2Q5HK+bm2O3Ry4OUNnezPjGG6J7a0/T4ZBicMzshLIoQIgxMGZ5wDBzr0hi1ozC/1v/vtFkKcZeZNIlIHoE/8pu1sNnuPmR8S0RnbtkuHNpn3B4ejUspmkN9AIUSg2gMNThBhOjVBRe4CSESj0aVSqbSnQ6SLyefziU6no/j3pJRD5/OjwfkEYJWZL1ar1Xe6hDo4y7IuENFbAFtSytODzxgSmc1mbzHzUwBfut3uquM4OzqEs2LS6fQx0zS3AJwkotu2bT+bKDKZTB6JxWKfAaSVUGa+G4vFNhe19WqL2+32OSJ6pAQCcNrt9qlarfZ7oki1kEqlTkQikQ99obOaMk+943needd1v40+ZOxhqXI0Ho/fYObLAFZUmOZh98GqcG4T0etWq1UcdXAf9wfEU2Pdnh5SzQAAAABJRU5ErkJggg=="},dca5:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("nav-bar",{attrs:{onlyBack:!0,title:t.$t("wristband.editCorner")},scopedSlots:t._u([{key:"right",fn:function(){return[i("strong",{on:{click:t.sure}},[t._v(" "+t._s(t.$t("wristband.sure"))+" ")])]},proxy:!0}])}),i("div",{staticStyle:{height:"65px","padding-top":"10px",background:"#FFFFFF",bottom:"0px","z-index":"40",position:"absolute",width:"100%","text-align":"center"},on:{click:t.deleteCorner}},[i("img",{staticStyle:{width:"17px",height:"21px"},attrs:{src:a("3911")}}),i("div",{staticStyle:{color:"rgba(51,51,51,1)","font-size":"11px"}},[t._v(t._s(t.$t("wristband.delete")))])]),i("van-field",{staticStyle:{"margin-top":"47px"},attrs:{label:t.$t("wristband.cornerType"),"is-link":"",readonly:"","input-align":"right",placeholder:t.$t("wristband.pselect"),value:t.typeValue.name},on:{click:function(e){t.showType=!0}}}),i("van-action-sheet",{attrs:{actions:t.typeactions,"cancel-text":t.$t("wristband.cancle"),"close-on-click-action":""},on:{select:t.onTypeSelect,cancel:t.onCancel},model:{value:t.showType,callback:function(e){t.showType=e},expression:"showType"}}),i("van-field",{attrs:{label:t.$t("wristband.cornerName"),maxlength:"6",placeholder:t.$t("wristband.pinputCornerName"),"input-align":"right"},model:{value:t.data.name,callback:function(e){t.$set(t.data,"name",e)},expression:"data.name"}}),i("van-field",{attrs:{"is-link":"",readonly:"","input-align":"right",placeholder:t.$t("wristband.pselect"),value:t.topicValue.name,label:t.$t("wristband.SubjectAreas")},on:{click:function(e){t.showTopic=!0}}}),i("van-action-sheet",{attrs:{actions:t.topicactions,"cancel-text":t.$t("wristband.cancle"),"close-on-click-action":""},on:{select:t.onTopicSelect,cancel:t.onCancel},model:{value:t.showTopic,callback:function(e){t.showTopic=e},expression:"showTopic"}}),1==t.typeValue.type?i("van-field",{attrs:{label:t.$t("wristband.BelongClass"),"is-link":"",readonly:"",value:t.data.clazzName,"input-align":"right",placeholder:t.$t("wristband.pselect")},on:{click:function(e){t.showSelectClass=!0}}}):t._e(),i("selectClass",{attrs:{showSelectClass:t.showSelectClass},on:{selectClassFinish:t.selectClassFinish,cancle:function(e){t.showSelectClass=!1}}}),i("div",{staticStyle:{background:"white"}},[i("van-field",{staticStyle:{"margin-top":"10px"},attrs:{"is-link":"",readonly:"","input-align":"right",label:t.$t("wristband.BelongLoc"),border:!1},on:{click:function(e){t.showSelectAddress=!0}}}),i("div",{staticClass:"positionStyle"},t._l(t.data.schoolPositionShowVOList,(function(e,a){return i("div",{key:a,staticClass:"item"},[i("div",[t._v(t._s(e.positionName))]),i("van-icon",{staticStyle:{width:"7px",height:"7px",margin:"3px 8px"},attrs:{name:"cross"},on:{click:function(e){return t.deletePos(a)}}})],1)})),0)],1),i("selectAddress",{attrs:{showSelectAddress:t.showSelectAddress,selectAddressData:t.data.schoolPositionShowVOList},on:{cancleSelectPop:function(e){t.showSelectAddress=!1},selectAddFinish:t.selectAddFinish}}),i("div",{staticStyle:{background:"white",padding:"5px 15px 10px 15px"}},[i("div",{staticStyle:{color:"#333333","font-size":"14px",display:"flex"}},[t._v(" "+t._s(t.$t("wristband.AreaProfile"))+" "),i("div",{staticStyle:{color:"#BBBBBB"}},[t._v(t._s(t.$t("wristband.optional")))])]),i("van-field",{staticStyle:{"margin-left":"-15px"},attrs:{label:"",maxlength:"120",type:"textarea",placeholder:t.$t("wristband.fillTargetCorner"),rows:"2"},model:{value:t.data.description,callback:function(e){t.$set(t.data,"description",e)},expression:"data.description"}})],1),i("div",{staticStyle:{"margin-top":"10px",padding:"15px",background:"white","margin-bottom":"60px"}},[i("div",{staticStyle:{color:"#333333","font-size":"14px",display:"flex"}},[t._v(" "+t._s(t.$t("wristband.cornerPhoto"))+" "),i("div",{staticStyle:{color:"#BBBBBB"}},[t._v(t._s(t.$t("wristband.optional")))])]),i("div",{staticClass:"file-upload"},[i("uploader",{attrs:{fileList:t.fileList,maxCount:1,mediaSheetActions:t.mediaSheetActions},on:{mediaSelect:t.onMediaSelect,reUpload:t.onReUpload}})],1)])],1)},s=[],o=(a("ab31"),a("4f40"),a("72b3"),a("c726"),a("989e"),a("1d7a"),a("b784"),a("270f"),a("da1d")),n=a("a4fb"),c=a("c425"),l=a("2939"),r=a("d9db"),d=a("f86f"),h={mounted:function(){var t=this;window.receiveMediaDataFromNative=function(e){var a=e.parameters.data;a.forEach((function(e){var a=1==e.type,i="";i=a?e.upDataAliResponse.snapshotUrl:e.upDataAliResponse.url,console.log(i);var s=t.getExistFile(e);null!=s?(s.progress=e.progress,s.url=i,s.status=e.status,s.resourceData=e.upDataAliResponse):t.fileList.push({url:i,isVideo:a,progress:e.percent,id:e.id,resourceId:e.upDataAliResponse.id,path:e.path,status:e.status,resourceData:e.upDataAliResponse})}))},window.kidBackPress=function(){return!(!t.showSelectAddress&&!t.showSelectClass)&&(t.showSelectAddress=!1,t.showSelectClass=!1,!0)},n["a"].selectById({id:this.cornerId}).then((function(e){t.data=e.data,null!=t.data.fileInfoDTO&&t.fileList.push({url:t.data.fileInfoDTO.url,isVideo:!1,progress:100,status:1,id:t.data.fileInfoDTO.id,resourceId:t.data.fileInfoDTO.id}),null==t.data.schoolPositionShowVOList&&(t.data.schoolPositionShowVOList=[]),t.topicValue=t.getTopic(t.data.topic),t.typeValue=t.getTypeString(t.data.type)}));var e=l["a"].getAppData().permission;null!=e&&(e.includes("attendance-teacher-common-area")&&this.typeactions.push({name:this.$t("wristband.publicarea"),type:2}),e.includes("attendance-teacher-outside-area")&&this.typeactions.push({name:this.$t("wristband.outdoorarea"),type:3}),e.includes("attendance-teacher-class-area")&&this.typeactions.push({name:this.$t("wristband.classarea"),type:1}))},components:{selectAddress:d["a"],selectClass:c["a"],uploader:r["a"],navBar:o["a"]},data:function(){return{showType:!1,showTopic:!1,showSelectClass:!1,cornerId:this.$route.query.cornerId,data:{},fileList:[],mediaSheetActions:[{name:this.$t("wristband.takePhoto")},{name:this.$t("wristband.fromAlbum")}],showSelectAddress:!1,typeValue:{name:"",type:-1},topicValue:{name:"",type:-1},introduce:"",cornerName:"",clazz:{clazzName:"",clazzId:-1},typeactions:[],topicactions:[{name:this.$t("wristband.health"),type:1},{name:this.$t("wristband.lang"),type:2},{name:this.$t("wristband.social"),type:3},{name:this.$t("wristband.science"),type:4},{name:this.$t("wristband.art"),type:5}]}},methods:{onClickLeft:function(){this.$router.go(-1)},onTypeSelect:function(t){this.showType=!1,this.typeValue=t},getTopic:function(t){var e={};return this.topicactions.forEach((function(a){a.type==t&&(e=a)})),e},selectAddFinish:function(t){var e=this;this.showSelectAddress=!1,this.data.schoolPositionShowVOList=[],t.forEach((function(t){var a={id:t.id,positionName:t.positionName};e.data.schoolPositionShowVOList.push(a)}))},onTopicSelect:function(t){this.topicValue=t,this.showTopic=!1},selectClassFinish:function(t){this.clazz=t[0].subList[0],this.data.clazzName=this.clazz.clazzName,this.data.clazzId=this.clazz.clazzId,this.showSelectClass=!1},onCancel:function(){this.showType=!1,this.showTopic=!1},sure:function(){var t=this;if(""!=this.data.name)if(""!=this.data.clazzName||1!=this.typeValue.type)if(this.data.schoolPositionShowVOList.length<=0)this.$toast(this.$t("wristband.selectlocation"));else{var e="";this.fileList.length>0&&(e=this.fileList[0].resourceId);var a=[];this.data.schoolPositionShowVOList.forEach((function(t){a.push(t.id)})),n["a"].schoolAreaUpdate({id:this.cornerId,name:this.data.name,type:this.typeValue.type,topic:this.topicValue.type,clazzId:this.data.clazzId,description:this.data.description,positionIdList:a,resourceId:e}).then((function(e){t.$toast(t.$t("wristband.Operationsuccessful")),t.$router.go(-1)}))}else this.$toast(this.$t("wristband.enterselectclass"));else this.$toast(this.$t("wristband.entercornername"))},getTypeString:function(t){var e={};return this.typeactions.forEach((function(a){a.type==t&&(e=a)})),e},onReUpload:function(t){var e={method:"reUploadMediaFromNative",parameters:{id:t.id,path:t.path},callback:"receiveMediaDataFromeNative"};l["a"].callNative(e)},onMediaSelect:function(t){var e={method:"selectMediaDataFromNative",parameters:{},callback:"receiveMediaDataFromNative"},a=1-this.fileList.length;0==t?e.method="takePhoto":1==t&&(e.parameters={imageMaxCount:a},e.method="selectAlbum"),l["a"].callNative(e)},getExistFile:function(t){var e=null;return this.fileList.forEach((function(a){a.id==t.id&&(e=a)})),e},deletePos:function(t){var e=this;this.$dialog.confirm({title:"",message:this.$t("wristband.editcornertips1"),width:"270px",confirmButtonText:this.$t("wristband.sure"),confirmButtonColor:"#48D4C6",cancelButtonText:this.$t("wristband.cancel"),cancelButtonColor:"#999999"}).then((function(){e.data.schoolPositionShowVOList.splice(t,1)}))},deleteCorner:function(){var t=this;this.$dialog.confirm({title:"",message:this.$t("wristband.editcornertips2"),width:"270px",confirmButtonText:this.$t("wristband.delete"),confirmButtonColor:"#48D4C6",cancelButtonText:this.$t("wristband.cancel"),cancelButtonColor:"#999999"}).then((function(){n["a"].schoolAreaDelete({id:t.cornerId}).then((function(e){t.$router.go(-2)}))}))}}},p=h,u=(a("10bb"),a("c701")),f=Object(u["a"])(p,i,s,!1,null,"3f9e15d4",null);e["default"]=f.exports}}]);