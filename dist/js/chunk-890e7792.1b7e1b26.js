(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-890e7792"],{"07bf":function(e,t,i){},2478:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"clazz"},[n("nav-bar",{attrs:{onlyBack:!0,title:e.title}},[n("template",{slot:"left"},[n("span",{on:{click:function(t){return t.stopPropagation(),e.onClickLeft()}}},[e._v("取消")])]),n("template",{slot:"right"},[n("span",{on:{click:function(t){return e.rightClick()}}},[e._v("全选")])])],2),n("div",{staticClass:"content",style:{paddingBottom:"60px"}},[n("van-pull-refresh",{on:{refresh:e.onRefresh},scopedSlots:e._u([{key:"pulling",fn:function(){return[n("img",{style:{height:"50px"},attrs:{src:i("ab14")}})]},proxy:!0},{key:"loading",fn:function(){return[n("img",{style:{height:"50px"},attrs:{src:i("ab14")}})]},proxy:!0},{key:"loosing",fn:function(){return[n("img",{style:{height:"50px"},attrs:{src:i("ab14")}})]},proxy:!0}]),model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[n("van-empty",{directives:[{name:"show",rawName:"v-show",value:0==e.list.length,expression:"list.length == 0"}],attrs:{description:e.$t("specialFood.emptyTip")}},[n("template",{slot:"image"},[n("div",[n("img",{attrs:{src:i("52c4")}})])])],2),n("van-list",{attrs:{finished:e.finished,"finished-text":"","immediate-check":!1},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(t,i){return n("ListItem",{key:i,attrs:{item:t,isEdit:!0,isSelect:e.getIsSelect(t),isSystem:!1,parentPermissionCode:e.permissionCode},on:{selectClick:function(i){return e.selectClick(t)},infoClick:function(i){return e.infoClick(t)},moreEditClick:function(i){return e.moreEditClick(t)}}})})),1)],1)],1),n("div",{staticClass:"bottomDiv"},[n("div",{staticClass:"div"},[n("div",{staticClass:"item",on:{click:function(t){return e.delClick()}}},[n("van-image",{style:{paddingTop:"4px"},attrs:{width:"35",height:"35",src:i("64fe")}}),e._m(0)],1)])]),n("van-action-sheet",{attrs:{actions:e.actions,"cancel-text":"取消","close-on-click-action":""},on:{select:e.onActionSheetSelect},model:{value:e.showSheet,callback:function(t){e.showSheet=t},expression:"showSheet"}}),n("van-overlay",{attrs:{show:e.loadingShow}},[n("van-loading",{attrs:{size:"24px",color:"#333333",vertical:""}},[n("span",{staticStyle:{color:"#333333"}},[e._v("加载中")])])],1)],1)},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"span"},[i("span",[e._v("删除")])])}],a=(i("445a"),i("72b3"),i("a543"),i("989e"),i("1d7a"),i("270f"),i("3f27"),i("8048")),o=i("da1d"),c=i("dff7"),l=i("2f9b"),r={name:"cloudSpace-editFinder",data:function(){return{list:[],loading:!1,finished:!1,refreshing:!1,loadingShow:!1,title:this.$route.query.title,defaultSelectId:this.$route.query.selectId,currentDirId:this.$route.query.currentDirId,nameSpace:this.$route.query.nameSpace,levNum:this.$route.query.levNum,permissionCode:parseInt(this.$route.query.permissionCode),selectArr:[],page:0,selectItem:"",showSheet:!1,actions:[],canBack:!0,delDialogShow:!1}},methods:{onClickLeft:function(){this.$router.go(-1)},onLoad:function(){var e=this;this.page++,this.loading=!0,this.finished=!0,this.loadingShow=!0,l["a"].fileList({parentId:this.currentDirId,pageNum:this.page,pageSize:20}).then((function(t){if(t.data.list&&t.data.list.length>0){e.list=e.list.concat(t.data.list);for(var i=0;i<t.data.list.length;i++){var n=t.data.list[i];if(n.id===e.defaultSelectId){e.selectArr.push(n);break}}}t.data.hasNextPage?e.onLoad():(e.loading=!1,e.refreshing=!1,e.loadingShow=!1)})).catch((function(t){e.loading=!1,e.refreshing=!1,e.loadingShow=!1}))},onRefresh:function(){this.refreshing=!0,this.list.splice(0,this.list.length),this.page=0,this.onLoad()},getIsSelect:function(e){return-1!=this.selectArr.indexOf(e)},selectClick:function(e){var t=this.selectArr.indexOf(e);-1==t?this.selectArr.push(e):this.selectArr.length>1&&this.selectArr.splice(t,1)},rightClick:function(){var e=this;this.selectArr.splice(0,this.selectArr.length),this.list.forEach((function(t){(1==t.type&&1==t.permissionCode||2==t.type)&&e.selectArr.push(t)}))},infoClick:function(e){a["a"].alert({title:e.name,message:e.describe,confirmButtonColor:"#62DBCF"}).then((function(){}))},moreEditClick:function(e){this.selectItem=e,1==e.type?1==e.permissionCode?2==e.namespace?this.actions=[{name:"重命名"},{name:"删除"},{name:"编辑描述"},{name:"查看详情"}]:this.actions=[{name:"重命名"},{name:"删除"},{name:"编辑描述"},{name:"查看详情"},{name:"权限管理"}]:this.actions=[{name:"查看详情"}]:1==this.permissionCode?this.actions=[{name:"重命名"},{name:"删除"}]:this.actions=[],this.actions.length>0&&(this.showSheet=!0)},onActionSheetSelect:function(e,t){var i=this;if("查看详情"===e.name)this.$router.push("/cloudSpace/finderDetail?selectId="+this.selectItem.id+"&currentDirId="+this.currentDirId);else if("编辑描述"===e.name)this.$router.push("/cloudSpace/editDesc?desc="+this.selectItem.describe+"&selectId="+this.selectItem.id+"&currentDirId="+this.currentDirId);else if("重命名"===e.name)this.$router.push("/cloudSpace/rename?name="+this.selectItem.name+"&selectId="+this.selectItem.id+"&currentDirId="+this.currentDirId+"&type="+this.selectItem.type);else if("权限管理"===e.name)this.$router.push("/cloudSpace/permission/index?DirId="+this.selectItem.id+"&DirName="+this.selectItem.name);else if("删除"===e.name){var n=new Array;n.push({id:this.selectItem.id,type:this.selectItem.type}),this.delDialogShow=!0,this.$dialog.confirm({title:"确认从园所云盘删除?",confirmButtonText:"删除",confirmButtonColor:"#48D4C6",cancelButtonText:"我再想想",cancelButtonColor:"#999999"}).then((function(){i.delDialogShow=!1,l["a"].deleteFile({arr:n,currentDirId:i.currentDirId}).then((function(e){i.list.splice(0,i.list.length),i.page=0,i.selectArr.splice(0,i.selectArr.length),i.onLoad()}))})).catch((function(){i.delDialogShow=!1}))}else this.showSheet=!1},delClick:function(){var e=this,t=new Array;this.selectArr.forEach((function(i){for(var n=0;n<e.list.length;n++){var s=e.list[n];if(i.id===s.id){t.push({id:i.id,type:s.type});break}}})),t.length>0&&(this.delDialogShow=!0,this.$dialog.confirm({title:"确认从园所云盘删除?",confirmButtonText:"删除",confirmButtonColor:"#48D4C6",cancelButtonText:"我再想想",cancelButtonColor:"#999999"}).then((function(){e.delDialogShow=!1,l["a"].deleteFile({arr:t,currentDirId:e.currentDirId}).then((function(t){e.list.splice(0,e.list.length),e.page=0,e.selectArr.splice(0,e.selectArr.length),e.onLoad()}))})).catch((function(){e.delDialogShow=!1})))}},components:{NavBar:o["a"],ListItem:c["a"]},mounted:function(){},activated:function(){var e=this;this.loadingShow=!1,this.showSheet=!1,this.delDialogShow=!1,this.canBack=!0,this.list.splice(0,this.list.length),this.page=0,this.onLoad(),window.kidBackPress=function(){if(e.canBack)return e.canBack=!1,setTimeout((function(){e.canBack=!0}),500),!!e.delDialogShow&&(e.$dialog.close(),e.delDialogShow=!1,!0)}},beforeRouteEnter:function(e,t,i){e.meta.keepAlive||(e.meta.keepAlive=!0,e=Object.assign({},e)),i()},beforeRouteLeave:function(e,t,i){"cloudSpace-finderDetail"!=e.name&&"cloudSpace-editDesc"!=e.name&&"cloudSpace-rename"!=e.name&&"cloudSpace-permission-index"!=e.name&&(t.meta.keepAlive=!1,t=Object.assign({},t)),i()}},h=r,d=(i("4a07"),i("c701")),u=Object(d["a"])(h,n,s,!1,null,"6c97571b",null);t["default"]=u.exports},"4a07":function(e,t,i){"use strict";i("07bf")},"64fe":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABCCAYAAADqv6CSAAADS0lEQVR4Xu2az2sTQRTHv6+pkQZqCv64ePASEKq0NhOshQpePFT02IviQS1CQQ96EG+2J8GDHlQE0XrQ/gVKvXgoimjTnW0LtgcJxYs3haSFFG3gydQEQsh2d8KklOUN5JTvvn3zme+83ZkdgrSmBEi4NCcgYAKcIWAEjF3REMeIY8QxdgTEMXa8pMaIY8QxdgTEMXa82lJjlFIpInrAzJcB7LNLKVS9RkSvmfmO1rocqm5R0C4wLwBcazGnqJe91FqPRRXb6toBhpRSfwDsATDHzO9tk9pOT0QjAAYBbJZKpe5CoWDu5bw5BzM6OppYXV2tmEyJ6KbneU9cZp3L5W4w82MTM5FIHMjn879dxq/FEjA79VSqdwyAGWbOuxxRIjoJ4NyudYxS6hOAYZeddhir2NHRMTw/P7/casyWp5KAiYBcKcVV2Swzz0a4xJmEiM4AMD9orVse6MaEnASqgWHmCd/3J531OkKgbDZ7j4gmBEwDLAET4B4BE3cwAwMDBxcWFn4BqBXsoEpilhb7tdZGG9hi4Ril1DiApwCmwhaASqk3AC4S0ZjneVNBZOICxnT2EoDvWuuj2zlBKfUDwBFmnvJ9P3ClHhcw08YFNmCI6JXneVfj7hgB02yElVICRsAAiLokEMcEVEoBI2D+E5CpFOyErdf7sG0HmUoylWQqbbuXJjVGakyEzdY6iThGHCOO2dHPJ/IeEzzl7gO4y8wffN8/G7KD9xHAaSKa9Dxv67tRsxaLHbze3t5kKpUaYebPYZvcfX19h5LJ5BAzz2itN2MNxq5yRVPvdsesAehm5ke+79+O1iU3qmw2+5CIbgFY11o7O+/nqvh+AXAKQKFUKh1v1/GvRpSZTGZvOp3+BiAD4KvWesgNbsAJmPrjX2ZXv1gsjrcbjoHS09PzjJmvGBiuj7U5AWOKaldX1xyAE9URKzDzWwAlVyPYECdNRBeqTjF/LW5sbAyurKz8dXU/J2BMMv39/Yc7Ozvf1cFxlWNYnMVKpXJ+aWnpZ5jQ5n9nYMxNq4/j68xsvjYeMwXZJhkL7TqAZSKaLpfLz106pZaDUzAWHdv1UgETMEQCRsDYzV5xjDhGHGNHQBxjx0tqjDhGHGNHIED9DxCm4mH4XXIWAAAAAElFTkSuQmCC"}}]);