(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22199fe8"],{"5c15":function(t,e,a){"use strict";a("db6f")},"766b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"group"},[a("selectAddress",{attrs:{showSelectAddress:t.showSelectAddress,isSingle:!0},on:{cancleSelectPop:function(e){t.showSelectAddress=!1},selectAddFinish:t.selectAddFinish}}),a("nav-bar",{attrs:{onlyBack:!0,title:t.$t("wristband.location")}}),a("div",{staticClass:"InfoDiv"},[a("div",{staticClass:"topInfo"},[a("van-row",[a("van-col",{staticClass:"infoName",attrs:{span:"4",offset:"1"}},[t._v(t._s(t.$t("wristband.equipmentName"))+":")]),a("van-col",{staticClass:"infoDetail",attrs:{span:"18",offset:"0"}},[t._v(t._s(t.data.deviceName))])],1),a("van-row",[a("van-col",{staticClass:"infoName",attrs:{span:"4",offset:"1"}},[t._v(t._s(t.$t("wristband.serialNumber"))+":")]),a("van-col",{staticClass:"infoDetail",attrs:{span:"18",offset:"0"}},[t._v(t._s(t.data.mac))])],1),a("van-row",[a("van-col",{staticClass:"infoName",attrs:{span:"5",offset:"1"}},[t._v(t._s(t.$t("wristband.location"))+":")]),a("van-col",{staticClass:"infoDetail",attrs:{span:"13",offset:"0"}},[t._v(t._s(t.data.bindInfo))]),a("van-button",{staticClass:"showViewBtn",staticStyle:{color:"#27CBBB",background:"#F4FBFA",width:"60px"},attrs:{span:"5",offset:"0",round:"",size:"small",type:"button"},on:{click:t.selectSpace}},[t._v(t._s(t.$t("wristband.select")))])],1)],1),a("div",{staticClass:"bindDiv"},[a("van-button",{staticClass:"bindButton",attrs:{round:"",size:"small",color:"linear-gradient(to right, #79DABD, #4CD7EC)",type:"button"},on:{click:t.clickSelect}},[t._v(t._s(t.$t("wristband.binding")))])],1)]),a("div",{staticClass:"tipsDiv"},[a("span",{staticClass:"detailInfo"},[t._v(" "+t._s(t.$t("wristband.tipMessage1"))+" "),a("br"),t._v(" "+t._s(t.$t("wristband.tipMessage3"))+" ")])])],1)},i=[],o=(a("72b3"),a("1d7a"),a("0bd5"),a("9b42"),a("270f"),a("7336"),a("b08c")),s=a("da1d"),c=a("f86f"),r=a("a4fb"),l={components:{selectAddress:c["a"],navBar:s["a"]},mounted:function(){var t=this;r["a"].availablePosition({}).then((function(e){e.data&&e.data>0?t.needCreateSpace=!1:t.needCreateSpace=!0})).catch((function(e){t.needCreateSpace=!1})),window.kidBackPress=function(){return!!t.showSelectAddress&&(t.showSelectAddress=!1,!0)}},data:function(){return{list:[],selectIndex:-1,loading:!1,finished:!1,isLoading:!1,showSelectAddress:!1,data:this.$route.query.data,needCreateSpace:!1,location:{id:"",showName:"",spaceName:"",positionName:""},active:0}},methods:{onClickLeft:function(){this.$router.go(-1)},selectAddFinish:function(t){var e=this;this.showSelectAddress=!1,t.forEach((function(t){var a={id:t.id,showName:t.name,spaceName:t.spaceName,positionName:t.spaceName};e.location=a,e.data.bindInfo=e.location.showName}))},selectSpace:function(){var t=this;this.needCreateSpace?this.$dialog.confirm({title:"",message:this.$t("wristband.locationCreateTip"),width:"270px",confirmButtonText:this.$t("wristband.toCreate"),confirmButtonColor:"#48D4C6",cancelButtonText:this.$t("wristband.cancel"),cancelButtonColor:"#999999"}).then((function(){t.$router.replace({path:"/wristband/spaceManager/createSpace"})})):this.showSelectAddress=!0},clickSelect:function(){var t=this;r["a"].bindBeacon({deviceId:this.data.deviceId,positionId:this.location.id}).then((function(e){Object(o["a"])(t.$t("wristband.bundlingSuccess")),t.$router.go(-1)}))}}},d=l,u=(a("5c15"),a("c701")),p=Object(u["a"])(d,n,i,!1,null,null,null);e["default"]=p.exports},"9b14":function(t,e,a){},a4fb:function(t,e,a){"use strict";a("445a");var n,i=a("28f8"),o=a("d722");e["a"]=(n={schoolSpaceList:function(t){return Object(o["b"])("/attendance/v1/schoolSpace/list",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},selectById:function(t){return Object(o["b"])("/attendance/v1/schoolArea/selectById",t)},schoolAreaList:function(t){return Object(o["b"])("/attendance/v1/schoolArea/list",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolAreaDelete:function(t){return Object(o["b"])("/attendance/v1/schoolArea/delete",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolSpaceById:function(t){return Object(o["b"])("/attendance/v1/schoolSpace/selectById",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolPositionSelectById:function(t){return Object(o["b"])("/attendance/v1/schoolPosition/selectById",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolPositionInsert:function(t){return Object(o["b"])("/attendance/v1/schoolPosition/insert",t,{headers:{"Content-Type":"application/json"}})},getGardenClassList:function(t){return Object(o["b"])("/kid-arch/v1/teacher/clazz/teacher/grade-clazz-option",t)},clazzStatistical:function(t){var e="/attendance/v1/bandBind/clazzStatistical";return Object(o["b"])(e,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},classStatisticalDetail:function(t){return Object(o["b"])("/attendance/v1/bandBind/clazzStatisticalDetail",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},bingdingSearch:function(t){return Object(o["b"])("/attendance/v1/bandBind/condition",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},bingdingWristband:function(t){return Object(o["b"])("/attendance/v1/bandBind/addStudent",t,{headers:{"Content-Type":"application/json"}})},unbindingWristband:function(t){return Object(o["b"])("/attendance/v1/bandBind/delete",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolSpaceDelete:function(t){return Object(o["b"])("/attendance/v1/schoolSpace/delete",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolPositionDelete:function(t){return Object(o["b"])("/attendance/v1/schoolPosition/delete",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolSpaceUpdate:function(t){return Object(o["b"])("/attendance/v1/schoolSpace/update",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolPositionUpdate:function(t){return Object(o["b"])("/attendance/v1/schoolPosition/update",t,{headers:{"Content-Type":"application/json"}})},schoolSpaceSave:function(t){return Object(o["b"])("/attendance/v1/schoolSpace/insert",t,{headers:{"Content-Type":"application/json"}})},schoolPositionDeviceList:function(t){return Object(o["b"])("/attendance/v1/schoolPosition/deviceList",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},schoolAreaInsert:function(t){return Object(o["b"])("/attendance/v1/schoolArea/insert",t,{headers:{"Content-Type":" application/json"}})},schoolAreaUpdate:function(t){return Object(o["b"])("/attendance/v1/schoolArea/update",t,{headers:{"Content-Type":"application/json"}})},availablePosition:function(t){return Object(o["b"])("/attendance/v1/schoolPosition/availablePosition",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getPositionParticipationStatistics:function(t){return Object(o["b"])("/attendance/v1/areaStatistic/dayArea",t)},getCornerManagerList:function(t){return Object(o["b"])("/attendance/v1/schoolPosition/deviceList",t)},updateBeacon:function(t){return Object(o["b"])("/attendance/v1/schoolPosition/updateDeviceName",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},bindBeacon:function(t){return Object(o["b"])("/attendance/v1/schoolPosition/bindDevice",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},unBindBeacon:function(t){return Object(o["b"])("/attendance/v1/schoolPosition/unbindDevice",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}},Object(i["a"])(n,"getPositionParticipationStatistics",(function(t){return Object(o["b"])("/attendance/v1/areaStatistic/dayArea",t)})),Object(i["a"])(n,"getAreaParticipationStatistics",(function(t){return Object(o["b"])("/attendance/v1/areaStatistic/dayAreaType",t)})),Object(i["a"])(n,"getClazzParticipationStatistics",(function(t){return Object(o["b"])("/attendance/v1/areaStatistic/dayAreaTypeDetail",t)})),Object(i["a"])(n,"getGradenParticipationStatistics",(function(t){return Object(o["b"])("/attendance/v1/areaStatistic/dayClazz",t)})),Object(i["a"])(n,"dayUserAreaTotal",(function(t){return Object(o["b"])("/attendance/v1/areaStatistic/dayUserArea",t)})),Object(i["a"])(n,"dayUserAreaDetail",(function(t){return Object(o["b"])("/attendance/v1/areaStatistic/dayUserDetail?date=".concat(t.date,"&userId=").concat(t.userId),"",{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(i["a"])(n,"getSleepDayTotalStatic",(function(t){return Object(o["b"])("/attendance/v1/sleepStatic/dayTotalStatic",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(i["a"])(n,"getSleepCurrentTimeStatic",(function(t){return Object(o["b"])("/attendance/v1/sleepStatic/currentTimeStatic",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(i["a"])(n,"getAllClazzSleepInfoStatic",(function(t){return Object(o["b"])("/attendance/v1/sleepStatic/getClazzInfoStatic",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(i["a"])(n,"getUserSleepInfoByClazzId",(function(t){return Object(o["b"])("/attendance/v1/sleepStatic/getUserInfoByClazzId",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(i["a"])(n,"getTimePeriodSleepStatic",(function(t){return Object(o["b"])("/attendance/v1/sleepStatic/currentTimeStaticList",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(i["a"])(n,"getClazzCurrentTimeSleepStaticList",(function(t){return Object(o["b"])("/attendance/v1/sleepStatic/clazzCurrentTimeStaticList",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(i["a"])(n,"getClazzHistoryStaticList",(function(t){return Object(o["b"])("/attendance/v1/sleepStatic/clazzHistoryStaticList",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(i["a"])(n,"getClazzChildSleepStaticList",(function(t){return Object(o["b"])("/attendance/v1/sleepStatic/clazzChildSleepStatic",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(i["a"])(n,"getStudentSleepDayStatistics",(function(t){return Object(o["b"])("/attendance/v1/sleepStatic/userBaseInfoStatic",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})})),Object(i["a"])(n,"checkDayIsHoliday",(function(t){return Object(o["b"])("/kid-arch/v1/teacher/holiday/getTypeByDay",t,{headers:{"Content-Type":"application/json"}})})),n)},a6ab:function(t,e,a){"use strict";a("9b14")},a7d6:function(t,e,a){"use strict";a("f257")},da1d:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-nav-bar",{attrs:{title:t.t_title,fixed:"",border:t.border}},[t._t("left",[a("van-icon",{staticClass:"nav-go",attrs:{name:"arrow-left"},on:{click:t.onClickLeft}})],{slot:"left"}),t._t("title",null,{slot:"title"}),t._t("right",null,{slot:"right"})],2)},i=[],o=a("2939"),s={computed:{t_title:function(){return this.title?this.title:/.*[\u4e00-\u9fa5]+.*$/.test(this.$route.meta.title)?this.$route.meta.title:this.$t("route.".concat(this.$route.meta.title))}},props:{border:{type:Boolean,default:!0},onlyBack:{type:Boolean,default:!1},title:{type:String}},methods:{onClickLeft:function(){this.onlyBack||o["a"].closeWebview(),this.$router.go(-1)}}},c=s,r=(a("a7d6"),a("c701")),l=Object(r["a"])(c,n,i,!1,null,"2f4d49ad",null);e["a"]=l.exports},db6f:function(t,e,a){},f257:function(t,e,a){},f86f:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-popup",{style:{width:"100%",height:"100%"},attrs:{position:"right"},model:{value:t.showSelectAddress,callback:function(e){t.showSelectAddress=e},expression:"showSelectAddress"}},[a("div",{staticClass:"nav-bar"},[a("van-icon",{staticClass:"nav-go",attrs:{name:"arrow-left"},on:{click:t.onClickLeft}}),a("span",{staticClass:"nav-title"},[t._v(t._s(t.$t("wristband.Selectlocation")))]),a("strong",{staticClass:"van-right",on:{click:t.selectFinish}},[t._v(t._s(t.$t("wristband.sure")))])],1),a("van-tabs",{staticStyle:{"margin-top":"40px"},attrs:{color:"#48D4C6","line-width":"30px"}},[a("van-tab",{attrs:{title:t.$t("wristband.indoor")}},[a("div",[a("van-collapse",{on:{change:t.changeCollapse},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("van-list",{attrs:{finished:t.finished1,"finished-text":""},on:{load:t.onLoad1},model:{value:t.loading1,callback:function(e){t.loading1=e},expression:"loading1"}},t._l(t.inDoorData,(function(e){return a("van-collapse-item",{key:e.id,attrs:{title:e.name,name:e.id,icon:e.arrow,"is-link":!1}},t._l(e.schoolPositionListVOList,(function(e){return a("div",{key:e.id,staticStyle:{padding:"10px 16px 10px 35px",display:"flex"},on:{click:function(a){return t.toggleItem(e)}}},[a("div",{staticStyle:{"font-size":"15px",color:"rgba(51,51,51,1)",flex:"8"}},[t._v(" "+t._s(e.positionName)+" ")]),a("div",{staticStyle:{color:"rgba(153,153,153,1)","font-size":"14px",display:"flex"}},[t._v(" "+t._s(t.$t("wristband.beacon"))+":"+t._s(t.xinBiaoCount(e))+" "),a("van-checkbox",{staticClass:"right",attrs:{name:e.id},model:{value:e.select,callback:function(a){t.$set(e,"select",a)},expression:"item1.select"}})],1)])})),0)})),1)],1)],1)]),a("van-tab",{attrs:{title:t.$t("wristband.outdoor")}},[a("div",[a("van-collapse",{on:{change:t.changeCollapse},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("van-list",{attrs:{finished:t.finished2,"finished-text":""},on:{load:t.onLoad2},model:{value:t.loading2,callback:function(e){t.loading2=e},expression:"loading2"}},t._l(t.outDoorData,(function(e){return a("van-collapse-item",{key:e.id,attrs:{title:e.name,name:e.id,icon:e.arrow,"is-link":!1}},t._l(e.schoolPositionListVOList,(function(e){return a("div",{key:e.id,staticStyle:{padding:"10px 16px 10px 35px",display:"flex"},on:{click:function(a){return t.toggleItem(e)}}},[a("div",{staticStyle:{"font-size":"15px",color:"rgba(51,51,51,1)",flex:"8"}},[t._v(" "+t._s(e.positionName)+" ")]),a("div",{staticStyle:{color:"rgba(153,153,153,1)","font-size":"14px",display:"flex"}},[a("div",[t._v(" "+t._s(t.$t("wristband.beacon"))+":"+t._s(t.xinBiaoCount(e))+" ")]),a("van-checkbox",{staticClass:"right",attrs:{name:e.id},model:{value:e.select,callback:function(a){t.$set(e,"select",a)},expression:"item1.select"}})],1)])})),0)})),1)],1)],1)])],1)],1)],1)},i=[],o=(a("cb3c"),a("72b3"),a("c726"),a("6540"),a("1d7a"),a("b784"),a("270f"),a("7336"),a("b08c")),s=a("a4fb"),c=(a("da1d"),{data:function(){return{inDoorData:[],outDoorData:[],activeNames:[],extraDatas:[],page1:1,finished1:!1,finished2:!1,loading1:!1,loading2:!1,page2:2}},props:{showSelectAddress:Boolean,selectAddressData:Array,isSingle:{type:Boolean,default:!1}},watch:{showSelectAddress:function(t){t&&(this.inDoorData=[],this.outDoorData=[],null!=this.selectAddressData&&(this.extraDatas=this.selectAddressData),this.page1=1,this.page2=1,this.getData(1,this.inDoorData,this.page1),this.getData(2,this.outDoorData,this.page2))}},computed:{},methods:{getData:function(t,e,a){var n,i=this;n=this.isSingle?{type:t,pageNum:a}:{type:t,availableFlag:!0,pageNum:a},s["a"].schoolSpaceList(n).then((function(a){1==t?(i.loading1=!1,a.data.isLastPage||!a.data.list||0==a.data.list.length?i.finished1=!0:i.finished1=!1):(i.loading2=!1,a.data.isLastPage||!a.data.list||0==a.data.list.length?i.finished2=!0:i.finished2=!1),null!=a.data.list&&a.data.list.forEach((function(t){i.activeNames.push(t.id),t.arrow="arrow-up",null!=t.schoolPositionListVOList&&(t.schoolPositionListVOList=t.schoolPositionListVOList.map((function(t){if(t.select=!1,t.positionName=t.name,null!=i.selectAddressData&&i.selectAddressData.length>0){var e=i.selectAddressData.map((function(t){return t.id}));i.extraDatas=i.extraDatas.filter((function(e){return e.id!=t.id})),t.select=e.includes(t.id)}return t}))),e.push(t)}))}))},onLoad1:function(){this.page1=this.page1+1,this.getData(1,this.inDoorData,this.page1)},onLoad2:function(){this.page2=this.page2+1,this.getData(2,this.outDoorData,this.page2)},changeCollapse:function(t){this.inDoorData=this.inDoorData.map((function(e){return e.arrow="arrow-down",t.forEach((function(t){t==e.id&&(e.arrow="arrow-up")})),e})),this.outDoorData=this.outDoorData.map((function(e){return e.arrow="arrow-down",t.forEach((function(t){t==e.id&&(e.arrow="arrow-up")})),e}))},toggleItem:function(t){t.select=!t.select,this.isSingle&&t.select&&(this.toggleOther(this.inDoorData,t.id),this.toggleOther(this.outDoorData,t.id))},toggleOther:function(t,e){this.datas=t.map((function(t){return null!=t.schoolPositionListVOList&&(t.schoolPositionListVOList=t.schoolPositionListVOList.map((function(t){return t.select&&t.id!=e&&(t.select=!1),t}))),t}))},selectFinish:function(){var t=[];this.pushSelect(this.inDoorData,t),this.pushSelect(this.outDoorData,t),t.length>0?(this.extraDatas.length>0&&this.extraDatas.forEach((function(e){t.push({id:e.id,positionName:e.positionName})})),this.$emit("selectAddFinish",t)):Object(o["a"])(this.$t("wristband.Selectlocation"))},onClickLeft:function(){this.$emit("cancleSelectPop")},xinBiaoCount:function(t){return t.beaconNum>0?t.beaconNum+"ä¸ª":this.$t("wristband.unbounded")},pushSelect:function(t,e){t.forEach((function(t){null!=t.schoolPositionListVOList&&t.schoolPositionListVOList.forEach((function(t){t.select&&e.push(t)}))}))}}}),r=c,l=(a("a6ab"),a("c701")),d=Object(l["a"])(r,n,i,!1,null,"27689bdf",null);e["a"]=d.exports}}]);