(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-db718246"],{"32c2":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"class"},[a("nav-bar",{attrs:{onlyBack:!e.onlyBack}}),a("div",{staticClass:"timeNumDiv"},[a("van-cell",{attrs:{title:e.$t("specialFood.time"),"is-link":"",value:e.timeCellValue,size:"large",required:""},on:{click:e.onTimeClick}}),a("van-cell",{attrs:{title:e.$t("specialFood.meal"),"is-link":"",value:e.numCellValue,size:"large",required:""},on:{click:e.onNumClick}})],1),a("div",{staticClass:"reasonDiv"},[a("van-cell",{attrs:{title:e.$t("specialFood.reason"),size:"large",required:""}}),a("van-field",{attrs:{autosize:"",type:"textarea",maxlength:"100",placeholder:e.$t("specialFood.reasonPlacerholder"),"show-word-limit":""},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1),e.canGo?a("button",{staticClass:"nextBtn canBtn",on:{click:e.commit}},[a("span",{staticClass:"canSpan"},[e._v(e._s(e.$t("specialFood.commit")))])]):a("button",{staticClass:"nextBtn cantBtn"},[a("span",{staticClass:"canSpan"},[e._v(e._s(e.$t("specialFood.commit")))])]),a("div",{staticClass:"tipDiv"},[a("span",[e._v(e._s(e.$t("specialFood.addSpecialFoodTimeTip"))+" "),a("br"),e._v(" "+e._s(e.tipTitle))])]),a("van-popup",{style:{height:"100%",width:"100%",overflow:"hidden"},model:{value:e.selectTimeShow,callback:function(t){e.selectTimeShow=t},expression:"selectTimeShow"}},[a("van-datetime-picker",{style:{bottom:"0",position:"absolute",left:"0",right:"0"},attrs:{type:"date","min-date":e.minDate},on:{cancel:e.timeCancel,confirm:e.timeConfirm},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1),a("van-popup",{style:{height:"100%",width:"100%",overflow:"hidden"},model:{value:e.selectNumShow,callback:function(t){e.selectNumShow=t},expression:"selectNumShow"}},[a("van-picker",{style:{bottom:"0",position:"absolute",left:"0",right:"0"},attrs:{"show-toolbar":"",columns:e.columns,"default-index":e.numDefaultIndex},on:{confirm:e.numConfirm,cancel:e.numCancel}})],1)],1)},n=[],l=(a("72b3"),a("989e"),a("270f"),a("3f27"),a("8048")),s=a("da1d"),o=a("ad2b"),c=a("edef"),r=a("2939"),u={name:"specialFood-addSpecialFood",data:function(){return{timeCellValue:this.$t("specialFood.selectTime"),numCellValue:this.$t("specialFood.selectMeal"),selectTimeShow:!1,currentDate:new Date,minDate:new Date,selectNumShow:!1,columns:[],numDefaultIndex:0,canUseColums:[],reason:this.$route.query.reason,isAdd:this.$route.query.isAdd,id:this.$route.query.id,mealId:this.$route.query.mealId,mealDate:this.$route.query.mealDate,mealName:this.$route.query.mealName,onlyBack:r["a"].getAppData().shouldBeClosed,tipTitle:"",timeTipResData:"",isEdit:!1}},computed:{canGo:function(){return!!(this.reason.length>0&this.timeCellValue!==this.$t("specialFood.selectTime")&this.numCellValue!==this.$t("specialFood.selectMeal"))}},methods:{onTimeClick:function(){this.selectTimeShow=!0},onNumClick:function(){this.selectNumShow=!0},timeCancel:function(){this.selectTimeShow=!1},timeConfirm:function(e){this.selectTimeShow=!1,this.currentDate=e;var t=Object(o["a"])(e,"{y}-{m}-{d}");this.timeCellValue=t,this.numCellValue=this.$t("specialFood.selectMeal"),this.mealId="",this.canUseColums.splice(0,this.canUseColums.length),this.columns.splice(0,this.columns.length),this.numDefaultIndex=0,this.getDailyByDate(),this.settipTitle()},numCancel:function(){this.selectNumShow=!1},numConfirm:function(e,t){this.selectNumShow=!1,e&&(this.numCellValue=e,this.numDefaultIndex=t,this.mealId=this.canUseColums[this.numDefaultIndex].id)},commit:function(){var e=this;1==this.isAdd?l["a"].confirm({message:this.$t("specialFood.addDialogTitle"),confirmButtonText:this.$t("specialFood.confirm"),confirmButtonColor:"#48D4C6",cancelButtonText:this.$t("specialFood.cancel"),cancelButtonColor:"#999999"}).then((function(){c["a"].addSpecialFood({mealId:e.mealId,reason:e.reason}).then((function(t){r["a"].getAppData().shouldBeClosed?e.$router.push("/specialFood/parentList"):(e.isEdit=!0,e.$router.go(-1))}))})).catch((function(){})):c["a"].updateSpecialFood({mealId:this.mealId,reason:this.reason,id:this.id}).then((function(t){e.isEdit=!0,e.$router.go(-1)}))},getDailyByDate:function(){var e=this;c["a"].getDailyByDate({date:this.timeCellValue}).then((function(t){t.data&&t.data.length>0&&t.data.forEach((function(t){2==t.type&&(e.canUseColums.push(t),e.columns.push(t.title))}))}))},getApplyTime:function(){var e=this;c["a"].getApplyTime().then((function(t){e.timeTipResData=t.data,e.settipTitle()}))},settipTitle:function(){var e=Object(o["a"])(new Date(this.timeTipResData.startTime),"{h}:{i}"),t=Object(o["a"])(new Date(this.timeTipResData.endTime),"{h}:{i}"),a=this.currentDate;if(this.timeTipResData.startDiffDay<0){var i=-1*this.timeTipResData.startDiffDay;a=this.currentDate-864e5*i}else if(0==this.timeTipResData.startDiffDay);else{var n=1*this.timeTipResData.startDiffDay;a=this.currentDate+864e5*n}var l=Object(o["a"])(a,"{y}-{m}-{d}"),s=this.currentDate;if(this.timeTipResData.endDiffDay<0){var c=-1*this.timeTipResData.endDiffDay;s=this.currentDate-864e5*c}else if(0==this.timeTipResData.endDiffDay);else{var u=1*this.timeTipResData.endDiffDay;s=this.currentDate+864e5*u}var d=Object(o["a"])(s,"{y}-{m}-{d}");"English"==r["a"].getAppData().lang?this.tipTitle="from "+l+" "+e+" to "+d+" "+t:this.tipTitle=l+" "+e+" åˆ° "+d+" "+t}},components:{NavBar:s["a"]},mounted:function(){r["a"].getAppData().shouldBeClosed&&r["a"].getAppData(),0==this.isAdd?(this.currentDate=this.mealDate,this.numCellValue=this.mealName):this.currentDate=new Date,this.timeCellValue=Object(o["a"])(this.currentDate,"{y}-{m}-{d}"),this.getDailyByDate(),this.getApplyTime()}},d=u,p=(a("53bd"),a("c701")),h=Object(p["a"])(d,i,n,!1,null,"3ffdf8f7",null);t["default"]=h.exports},"53bd":function(e,t,a){"use strict";a("cb68")},"989e":function(e,t,a){"use strict";var i=a("a09b"),n=a("0119"),l=a("0296"),s=a("c3a3"),o=a("6050"),c=a("28ea"),r=a("8863"),u=a("4d7f"),d=a("c1e5"),p=u("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,f=Math.min,D=9007199254740991,y="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!p||!h},{splice:function(e,t){var a,i,u,d,p,h,v=o(this),g=s(v.length),b=n(e,g),C=arguments.length;if(0===C?a=i=0:1===C?(a=0,i=g-b):(a=C-2,i=f(m(l(t),0),g-b)),g+a-i>D)throw TypeError(y);for(u=c(v,i),d=0;d<i;d++)p=b+d,p in v&&r(u,d,v[p]);if(u.length=i,a<i){for(d=b;d<g-i;d++)p=d+i,h=d+a,p in v?v[h]=v[p]:delete v[h];for(d=g;d>g-i+a;d--)delete v[d-1]}else if(a>i)for(d=g-i;d>b;d--)p=d+i-1,h=d+a-1,p in v?v[h]=v[p]:delete v[h];for(d=0;d<a;d++)v[d+b]=arguments[d+2];return v.length=g-i+a,u}})},a7d6:function(e,t,a){"use strict";a("f257")},cb68:function(e,t,a){},da1d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-nav-bar",{attrs:{title:e.t_title,fixed:"",border:e.border}},[e._t("left",[a("van-icon",{staticClass:"nav-go",attrs:{name:"arrow-left"},on:{click:e.onClickLeft}})],{slot:"left"}),e._t("title",null,{slot:"title"}),e._t("right",null,{slot:"right"})],2)},n=[],l=a("2939"),s={computed:{t_title:function(){return this.title?this.title:/.*[\u4e00-\u9fa5]+.*$/.test(this.$route.meta.title)?this.$route.meta.title:this.$t("route.".concat(this.$route.meta.title))}},props:{border:{type:Boolean,default:!0},onlyBack:{type:Boolean,default:!1},title:{type:String}},methods:{onClickLeft:function(){this.onlyBack||l["a"].closeWebview(),this.$router.go(-1)}}},o=s,c=(a("a7d6"),a("c701")),r=Object(c["a"])(o,i,n,!1,null,"2f4d49ad",null);t["a"]=r.exports},edef:function(e,t,a){"use strict";var i=a("d722");t["a"]={getParentSpecialFoodList:function(e){return Object(i["b"])("/garden/v1/parent/ck/special/apply/list",e)},getParentSpecialFoodDetail:function(e){return Object(i["b"])("/garden/v1/parent/ck/special/apply/get",e)},cancelSpecialFood:function(e){return Object(i["b"])("/garden/v1/parent/ck/special/apply/cancel",e)},getTeacherSpecialFoodList:function(e){return Object(i["b"])("/garden/v1/teacher/ck/special/apply/list",e,{headers:{"Content-Type":"application/json"}})},getTeacherSpecialFoodDetail:function(e){return Object(i["b"])("/garden/v1/teacher/ck/special/apply/get",e)},getDailyByDate:function(e){return Object(i["b"])("/garden/v1/parent/ck/cookbook/daily/get-by-date",e)},addSpecialFood:function(e){return Object(i["b"])("/garden/v1/parent/ck/special/apply/add",e,{headers:{"Content-Type":"application/json"}})},updateSpecialFood:function(e){return Object(i["b"])("/garden/v1/parent/ck/special/apply/update",e,{headers:{"Content-Type":"application/json"}})},applySpecialFood:function(e){return Object(i["b"])("/garden/v1/teacher/ck/special/apply/approve",e,{headers:{"Content-Type":"application/json"}})},getApplyTime:function(e){return Object(i["b"])("/garden/v1/teacher/ck/apply/time/get",e)}}},f257:function(e,t,a){}}]);