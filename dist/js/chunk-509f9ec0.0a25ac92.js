(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-509f9ec0"],{"151e":function(t,i,e){"use strict";e("3326")},"22d0":function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABECAYAAAA4E5OyAAAFHUlEQVR4Xu2cf4hUVRTHv+fOz93V/M+kslyQQoKgmW0LKoTKZHdcoVLyHytpkxSkoC1CC5VSohSKwEINK/+xtAK3dVErsFqobWeDIKQQ1rKi+m9bZ/fNj70n7ht2nZ2d2Xn3zczzjd75b5dzzzn38+6Pc++59xI8+k2sjd9IFt8GFksguRXEi8GYz0ALEVqUG8xIEZACYQxMFyBoBCTPc5R+ajqa/N0LV6leRnjH2nBueGR5LiuXg6idmK+txhYT/QPmwWBInAnGWs/QjqOZavSVK1tzIPzQXcsymewaZrkSTPPr4TSIx4jEyXA4dIw+++5sLW3UDEhmVTwmGd2QfHctHayoS9CAIBwMf54crijrQKBqIPbYMI4XPQdRXDlBA9yM16oda1wD4Y0bQ+k/k91gfhKMkAP49RchZEH0XuT6+EHavz/rxqArIOPr7lhM/02+QYxlbozWuwwTzvI1geebj/xwQdeWNhCrs20Fs9xJyE+Vfv0xkCIS26Mnhk7r+KgFJNPVtl7mZI+OgcstK4JiT7h36LBTPxwDsTrangXkBqeK/SUnDkX7h9504pMjII0NYwqDMygVgTRiNynXEpx0nzmBqAEULPc4aWoNI0OiZ66BtiwQe2odnfzI77OJ7odQsw8vCDxabkouCUQFXdYfQ4f9GmfoQiiWV3FK9Ia29aWCt5JArER8EyQ/Xa1hX5cX9G60L/lOsY+zgNhrkxR/6ptwvF5UCVluoYeL1z6zgFiJ+L7LvlCrF4QSC8JoX3Jz4b9nALGX8JN8yCt//GBHBGhD4dbBDCBXVeuYjtdooLCVTANRO11pK3PED1/Nax8i0fC6qZ23aSDpRPxllrzGa2f8YI8EHYv0JV9RvthA1IZwevDcV3XbA/VDrefygXgs0r70PrVxbQPJrm5bMZm9wkJ0zY8QCIme0PGh0zaQiY7YqwR0aeq4osQZ6G3qH34pD6QzfqravEmj01F5n6YTyQfJjkwvcm+jV6gW/vM86iKrK7YKOeyqhcKG1xHENhpPxLcIyd1VVSYaAZrqk6Rz7NfEGGClHYuXFAyIA2R1xveC+QE3msSd9yL42GbQTUsBIdyoqF0ZKcG/nUPuw32Q33/jTi/RF2QlYh9D4hZdDWLlaoSe2a5bzBP57Fs7IU8e17cl8AtZnbF+MK7TKt3SgsgH/UCzT1Mz4ymkH+8AUimtaoHwF010xr4mxgKdkuL2doR2zdpb0VFRd9nstk2QPw5q2WHCqOoySUgEdUqKe+5HaOvrOkU8l83ufgHy2y/17ArkXAHBwkWIvN+nZ8xj6fQTCeDfv/WsKiBuuoyyEtiyFcGOR/QMeiSd6/8Ek2/v1raW7zJuBlVlKhpB4KnnfAfFhnFgr7uYRA2qbqfdafwLF0HcfCswT2tc1v56FQtcHIX89Wf9blKoOD/tug/MKjrZaAIqMKtJ6N5oFS/nrx26m8XdJTxqcWeW/5d42Mt/9afZIAKmN4hsIGYLETO2EM0ms8o/5M+NmDSE6iLFaQj1P5OoKkhUKSAmlZm/RGCS3aJMslvRMcchilqIgnJVHYkoah2zuowdk5gjVbNXOubQXRETcyyzxHLYHNwtAcUc7S4BxRz+L9VSGvquzFSFanQ9ZEpdY9+ZcQajZBwy1/ZoI3YfJ3dkCutc8QJRMSBzCbHclGyuqc4kYy4ylxlczFX3MmDMYwhlwJjnMsqBMQ+qzJ3gnXpyR0pqFYwlTp7ckYTzQvCIl0/u/A//Wo1x+drjDgAAAABJRU5ErkJggg=="},2779:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAsCAYAAAANUxr1AAAAb0lEQVRYR+3SoQ2AMABFQToT+4/ATgiqag7TgHiYik9CubxxPM85z2uenx2jC8E+IcWZUEIS0F5DCUlAew0lJAHtNZSQBLTXUEIS0F5DCUlAew0lJAHtNZSQBLTXUEIS0L42pPe377+90PY/f/uBGwDzKZMSLbwEAAAAAElFTkSuQmCC"},3326:function(t,i,e){},cb61:function(t,i,e){"use strict";e.r(i);var o=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"group"},[o("nav-bar",{attrs:{title:t.$t("pollingPosition.addPosition")},scopedSlots:t._u([{key:"left",fn:function(){return[o("van-icon",{attrs:{name:"arrow-left"},on:{click:t.onClickLeft}})]},proxy:!0},{key:"right",fn:function(){return[o("strong",{on:{click:t.doneClick}},[t._v(t._s(t.$t("pollingPosition.complete")))])]},proxy:!0}])}),o("div",{staticClass:"content"},[o("van-notice-bar",{staticClass:"noticeBar",attrs:{mode:"closeable",background:"#F9F9FA",color:"#999999"}},[t._v(" "+t._s(t.$t("pollingPosition.tipAdd"))+" ")]),o("div",{directives:[{name:"permission",rawName:"v-permission",value:["patrol-group-manage"],expression:"['patrol-group-manage']"}],staticClass:"addDiv",on:{click:t.gotoAddGroup}},[o("van-icon",{staticClass:"diy",attrs:{name:"add-o",color:"#2A2A2A",size:"20"}}),o("span",[t._v(t._s(t.$t("pollingPosition.addGroup")))])],1),o("van-collapse",{attrs:{accordion:""},model:{value:t.activeName,callback:function(i){t.activeName=i},expression:"activeName"}},t._l(t.dataList,(function(i,n){return o("van-collapse-item",{key:n,attrs:{name:n,icon:t.activeName===n?"arrow-down":"arrow"},scopedSlots:t._u([{key:"title",fn:function(){return[o("div",[o("span",{staticClass:"titleClass"},[t._v(t._s(i.groupName)+"（"+t._s(i.list.length)+"）")])])]},proxy:!0},{key:"right-icon",fn:function(){return[o("button",{directives:[{name:"permission",rawName:"v-permission",value:["patrol-item-view"],expression:"['patrol-item-view']"}],staticClass:"addBtn",on:{click:function(e){return e.stopPropagation(),t.addBtnAction(i)}}},[t._v(" "+t._s(t.$t("pollingPosition.addItem"))+" ")])]},proxy:!0},{key:"default",fn:function(){return t._l(i.list,(function(i,a){return o("div",{key:a,staticClass:"extendView"},[o("div",{staticClass:"listTitleView"},[o("span",{staticClass:"listTitle"},[t._v(t._s(i.cateName)+"（"+t._s(i.list.length)+"）")]),o("img",{attrs:{src:e("22d0"),width:"17",height:"17"},on:{click:function(i){return t.clearCate(n,a)}}})]),o("van-divider"),t._l(i.list,(function(i,s){return o("div",{key:s,staticClass:"listContentView"},[o("div",{staticClass:"listContentItem"},[o("img",{staticStyle:{"margin-left":"48.5px"},attrs:{src:e("2779"),width:"8.5",height:"10.5"}}),o("span",{staticClass:"listTitle"},[t._v(t._s(i.itemName))]),o("img",{staticStyle:{"margin-left":"2%"},attrs:{src:e("22d0"),width:"17",height:"17"},on:{click:function(i){return t.clearItem(n,a,s)}}})]),o("van-divider")],1)}))],2)}))},proxy:!0}],null,!0)})})),1)],1),o("van-popup",{style:{height:"100%",width:"100%",overflow:"hidden",background:"#F9F9FA"},model:{value:t.selectOptionShow,callback:function(i){t.selectOptionShow=i},expression:"selectOptionShow"}},[o("chooseOption",{on:{onChooseSure:t.onChooseSure,onClickOptionLeft:t.onClickOptionLeft}})],1)],1)},n=[],a=(e("cb3c"),e("72b3"),e("989e"),e("270f"),e("7336"),e("b08c")),s=(e("3f27"),e("8048")),c=e("da1d"),l=e("96a0"),r=e("0319"),d=e("ed08"),u={name:"polling-management-addPositionStep2",methods:{onClickLeft:function(){var t=this;0!=this.dataList.filter((function(t){return t.list.length>0})).length?s["a"].confirm({message:"您尚未保存巡检项设置\n请确认是否保存？",confirmButtonText:"保存并返回",confirmButtonColor:"#48D4C6",cancelButtonText:"直接返回",cancelButtonColor:"#999999"}).then((function(){t.doneClick()})).catch((function(){t.$router.go(-2)})):this.$router.go(-2)},gotoAddGroup:function(){this.$router.push("/polling/management/group/addGroup")},addBtnAction:function(t){this.selectAddItem=t,this.selectOptionShow=!0},onClickOptionLeft:function(){this.selectOptionShow=!1},onChooseSure:function(t){var i=this;this.selectOptionShow=!1;var e=Object(d["a"])(t),o=e.itemSelect,n=function(){var t=o[0],e=t.origItemId,n=!1;if(i.selectAddItem.list.forEach((function(i){if(i.id===e){n=!0;var a=!1;i.list.forEach((function(i){i.id===t.id&&(a=!0)})),a||i.list.push(t),o.splice(0,1)}})),!n){for(var a={id:t.origItemId,cateName:t.origItemCateName,itemNum:t.origItemItemNum,list:[]},s=o.length;s>0;s--){var c=o[s-1];c.origItemId===a.id&&(a.list.splice(0,0,c),o.splice(s-1,1))}i.selectAddItem.list.push(a)}};while(o.length>0)n();t.topSelect=[],t.itemSelect=[]},clearCate:function(t,i){var e=Object(d["a"])(this.dataList);e[t].list.splice(i,1),this.dataList=e},clearItem:function(t,i,e){var o=Object(d["a"])(this.dataList);o[t].list[i].list.splice(e,1),console.log(d["a"]),0==o[t].list[i].list.length&&o[t].list.splice(i,1),this.dataList=o},doneClick:function(){var t=this,i=[];this.dataList.forEach((function(t){if(t.list.length>0){var e={groupId:0,itemIds:[]};e.groupId=t.id;var o=[];t.list.forEach((function(t){t.list.forEach((function(t){o.push(t.id)}))})),e.itemIds=o,i.push(e)}})),0!=i.length?r["a"].addPosition({pointName:this.pointName,pointInfo:i}).then((function(i){"common-0001"===i.code&&(Object(a["a"])("点位添加成功"),t.$router.go(-2))})):Object(a["a"])("请添加至少一个巡检项")},getPatrolGroupList:function(){var t=this;r["a"].getPatrolGroupList().then((function(i){"common-0001"===i.code&&(t.resData=i.data,t.dataList=t.resData,t.dataList.forEach((function(t){t.list=[]})),console.log(t.dataList))}))}},data:function(){return{pointName:this.$route.query.pointName,topHidden:!1,activeName:-1,dataList:[],selectAddItem:{},selectOptionShow:!1,resData:""}},components:{chooseOption:l["a"],navBar:c["a"]},mounted:function(){this.getPatrolGroupList()}},p=u,f=(e("151e"),e("c701")),m=Object(f["a"])(p,o,n,!1,null,"02428c2c",null);i["default"]=m.exports}}]);