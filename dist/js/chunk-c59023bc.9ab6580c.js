(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c59023bc"],{"2fd4d":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("nav-bar",{attrs:{onlyBack:!0,title:e.$t("wristband.addPosition")},scopedSlots:e._u([{key:"right",fn:function(){return[i("strong",{on:{click:e.sure}},[i("span",{class:{rightBtn:e.unclick}},[e._v(e._s(e.$t("wristband.sure")))])])]},proxy:!0}])}),i("van-field",{staticStyle:{"margin-top":"47px"},attrs:{readonly:"","input-align":"right",placeholder:e.spaceName,label:e.$t("wristband.subordinatespace")}}),i("van-field",{attrs:{label:e.$t("wristband.locationname"),maxlength:"12",placeholder:e.$t("wristband.enterlocationname"),"input-align":"right"},model:{value:e.positionName,callback:function(t){e.positionName=t},expression:"positionName"}}),i("div",{staticStyle:{background:"white"}},[i("van-field",{attrs:{"is-link":"",readonly:"","input-align":"right",placeholder:e.$t("wristband.selectbeacon"),label:e.$t("wristband.bindingbeacon"),border:!1},on:{click:function(t){e.showSelectDevice=!0}}}),null!=e.deviceList&&e.deviceList.length>0?i("div",{staticClass:"positionStyle"},e._l(e.deviceList,(function(t,s){return i("div",{key:s,staticClass:"item"},[i("div",[e._v(e._s(t.deviceName))]),i("van-icon",{staticStyle:{width:"7px",height:"7px",margin:"3px 8px"},attrs:{name:"cross"},on:{click:function(t){return e.deletePos(s)}}})],1)})),0):e._e()],1),i("selectBeacon",{attrs:{showSelectDevice:e.showSelectDevice,selectArray:e.selectDevice},on:{selectDeviceFinish:e.selectDeviceFinish,cancle:function(t){e.showSelectDevice=!1}}}),i("div",{staticStyle:{"margin-top":"10px",padding:"15px",background:"white"}},[i("div",{staticStyle:{color:"#555555","font-size":"14px"}},[e._v(e._s(e.$t("wristband.addpositiontips2")))]),i("div",{staticClass:"file-upload"},[i("uploader",{attrs:{fileList:e.fileList,maxCount:1,mediaSheetActions:e.mediaSheetActions},on:{mediaSelect:e.onMediaSelect,reUpload:e.onReUpload}})],1)])],1)},a=[],n=(i("72b3"),i("989e"),i("270f"),i("da1d")),c=i("a4fb"),o=i("2939"),l=i("f54c"),r=i("d9db"),d={mounted:function(){var e=this;window.receiveMediaDataFromNative=function(t){var i=t.parameters.data;i.forEach((function(t){var i=1==t.type,s="";s=i?t.upDataAliResponse.snapshotUrl:t.upDataAliResponse.url,console.log(s);var a=e.getExistFile(t);null!=a?(e.$toast(s),a.progress=t.progress,a.url=s,a.status=t.status,a.resourceData=t.upDataAliResponse):e.fileList.push({url:s,isVideo:i,progress:t.percent,id:t.id,path:t.path,status:t.status,resourceData:t.upDataAliResponse})}))},window.kidBackPress=function(){return!!e.showSelectDevice&&(e.showSelectDevice=!1,!0)}},data:function(){return{showSelectDevice:!1,spaceName:this.$route.query.spaceName,spaceId:this.$route.query.spaceId,positionName:"",imgResourse:null,deviceList:[],unclick:!0,selectDevice:[],fileList:[],mediaSheetActions:[{name:this.$t("wristband.takePhoto")},{name:this.$t("wristband.fromAlbum")}]}},watch:{positionName:function(e){""!=e&&this.deviceList.length>0?this.unclick=!1:this.unclick=!0},deviceList:function(e){""!=this.positionName&&e.length>0?this.unclick=!1:this.unclick=!0}},components:{selectBeacon:l["a"],uploader:r["a"],navBar:n["a"]},methods:{sure:function(){var e=this;if(""!=this.positionName&&!(this.deviceList.length<=0)){var t=[],i="";this.fileList.length>0&&(i=this.fileList[0].resourceData.id),this.deviceList.length>0&&this.deviceList.forEach((function(e){t.push(e.deviceId)})),c["a"].schoolPositionInsert({name:this.positionName,spaceId:this.spaceId,deviceIdList:t,resourceId:i}).then((function(t){e.$toast(e.$t("wristband.Operationsuccessful")),e.$router.go(-1)}))}},onReUpload:function(e){var t={method:"reUploadMediaFromNative",parameters:{id:e.id,path:e.path},callback:"receiveMediaDataFromeNative"};o["a"].callNative(t)},onMediaSelect:function(e){var t={method:"selectMediaDataFromNative",parameters:{},callback:"receiveMediaDataFromNative"},i=1-this.fileList.length;0==e?t.method="takePhoto":1==e&&(t.parameters={imageMaxCount:i},t.method="selectAlbum"),o["a"].callNative(t)},getExistFile:function(e){var t=null;return this.fileList.forEach((function(i){i.id==e.id&&(t=i)})),t},onClickLeft:function(){this.$router.go(-1)},selectDeviceFinish:function(e){var t=this;this.deviceList=[],this.selectDevice=e,e.forEach((function(e){var i={deviceId:e.deviceId,deviceName:e.deviceName,threshold:0};t.deviceList.push(i)})),this.showSelectDevice=!1},deletePos:function(e){var t=this;this.$dialog.confirm({title:"",message:this.$t("wristband.addpositiontips1"),width:"270px",confirmButtonText:this.$t("wristband.sure"),confirmButtonColor:"#48D4C6",cancelButtonText:this.$t("wristband.cancel"),cancelButtonColor:"#999999"}).then((function(){t.selectDevice.splice(e,1),t.deviceList.splice(e,1)}))}}},u=d,h=(i("ea80"),i("c701")),p=Object(h["a"])(u,s,a,!1,null,"00e9e2e7",null);t["default"]=p.exports},ea80:function(e,t,i){"use strict";i("ec03")},ec03:function(e,t,i){}}]);